var ca=Object.create;var fr=Object.defineProperty;var ua=Object.getOwnPropertyDescriptor;var la=Object.getOwnPropertyNames;var da=Object.getPrototypeOf,fa=Object.prototype.hasOwnProperty;var Un=t=>fr(t,"__esModule",{value:!0});var W=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ha=(t,e)=>{for(var r in e)fr(t,r,{get:e[r],enumerable:!0})},Gn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of la(e))!fa.call(t,o)&&(r||o!=="default")&&fr(t,o,{get:()=>e[o],enumerable:!(n=ua(e,o))||n.enumerable});return t},pa=(t,e)=>Gn(Un(fr(t!=null?ca(da(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),ga=(t=>(e,r)=>t&&t.get(e)||(r=Gn(Un({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var Xn=(t,e,r)=>new Promise((n,o)=>{var a=d=>{try{l(r.next(d))}catch(m){o(m)}},u=d=>{try{l(r.throw(d))}catch(m){o(m)}},l=d=>d.done?n(d.value):Promise.resolve(d.value).then(a,u);l((r=r.apply(t,e)).next())});var Zn=W((z,Yn)=>{z=Yn.exports=G;var ne;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ne=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:ne=function(){};z.SEMVER_SPEC_VERSION="2.0.0";var zr=256,hr=Number.MAX_SAFE_INTEGER||9007199254740991,Kr=16,te=z.re=[],S=z.src=[],_=z.tokens={},Vn=0;function V(t){_[t]=Vn++}V("NUMERICIDENTIFIER");S[_.NUMERICIDENTIFIER]="0|[1-9]\\d*";V("NUMERICIDENTIFIERLOOSE");S[_.NUMERICIDENTIFIERLOOSE]="[0-9]+";V("NONNUMERICIDENTIFIER");S[_.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";V("MAINVERSION");S[_.MAINVERSION]="("+S[_.NUMERICIDENTIFIER]+")\\.("+S[_.NUMERICIDENTIFIER]+")\\.("+S[_.NUMERICIDENTIFIER]+")";V("MAINVERSIONLOOSE");S[_.MAINVERSIONLOOSE]="("+S[_.NUMERICIDENTIFIERLOOSE]+")\\.("+S[_.NUMERICIDENTIFIERLOOSE]+")\\.("+S[_.NUMERICIDENTIFIERLOOSE]+")";V("PRERELEASEIDENTIFIER");S[_.PRERELEASEIDENTIFIER]="(?:"+S[_.NUMERICIDENTIFIER]+"|"+S[_.NONNUMERICIDENTIFIER]+")";V("PRERELEASEIDENTIFIERLOOSE");S[_.PRERELEASEIDENTIFIERLOOSE]="(?:"+S[_.NUMERICIDENTIFIERLOOSE]+"|"+S[_.NONNUMERICIDENTIFIER]+")";V("PRERELEASE");S[_.PRERELEASE]="(?:-("+S[_.PRERELEASEIDENTIFIER]+"(?:\\."+S[_.PRERELEASEIDENTIFIER]+")*))";V("PRERELEASELOOSE");S[_.PRERELEASELOOSE]="(?:-?("+S[_.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+S[_.PRERELEASEIDENTIFIERLOOSE]+")*))";V("BUILDIDENTIFIER");S[_.BUILDIDENTIFIER]="[0-9A-Za-z-]+";V("BUILD");S[_.BUILD]="(?:\\+("+S[_.BUILDIDENTIFIER]+"(?:\\."+S[_.BUILDIDENTIFIER]+")*))";V("FULL");V("FULLPLAIN");S[_.FULLPLAIN]="v?"+S[_.MAINVERSION]+S[_.PRERELEASE]+"?"+S[_.BUILD]+"?";S[_.FULL]="^"+S[_.FULLPLAIN]+"$";V("LOOSEPLAIN");S[_.LOOSEPLAIN]="[v=\\s]*"+S[_.MAINVERSIONLOOSE]+S[_.PRERELEASELOOSE]+"?"+S[_.BUILD]+"?";V("LOOSE");S[_.LOOSE]="^"+S[_.LOOSEPLAIN]+"$";V("GTLT");S[_.GTLT]="((?:<|>)?=?)";V("XRANGEIDENTIFIERLOOSE");S[_.XRANGEIDENTIFIERLOOSE]=S[_.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";V("XRANGEIDENTIFIER");S[_.XRANGEIDENTIFIER]=S[_.NUMERICIDENTIFIER]+"|x|X|\\*";V("XRANGEPLAIN");S[_.XRANGEPLAIN]="[v=\\s]*("+S[_.XRANGEIDENTIFIER]+")(?:\\.("+S[_.XRANGEIDENTIFIER]+")(?:\\.("+S[_.XRANGEIDENTIFIER]+")(?:"+S[_.PRERELEASE]+")?"+S[_.BUILD]+"?)?)?";V("XRANGEPLAINLOOSE");S[_.XRANGEPLAINLOOSE]="[v=\\s]*("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+S[_.XRANGEIDENTIFIERLOOSE]+")(?:"+S[_.PRERELEASELOOSE]+")?"+S[_.BUILD]+"?)?)?";V("XRANGE");S[_.XRANGE]="^"+S[_.GTLT]+"\\s*"+S[_.XRANGEPLAIN]+"$";V("XRANGELOOSE");S[_.XRANGELOOSE]="^"+S[_.GTLT]+"\\s*"+S[_.XRANGEPLAINLOOSE]+"$";V("COERCE");S[_.COERCE]="(^|[^\\d])(\\d{1,"+Kr+"})(?:\\.(\\d{1,"+Kr+"}))?(?:\\.(\\d{1,"+Kr+"}))?(?:$|[^\\d])";V("COERCERTL");te[_.COERCERTL]=new RegExp(S[_.COERCE],"g");V("LONETILDE");S[_.LONETILDE]="(?:~>?)";V("TILDETRIM");S[_.TILDETRIM]="(\\s*)"+S[_.LONETILDE]+"\\s+";te[_.TILDETRIM]=new RegExp(S[_.TILDETRIM],"g");var ma="$1~";V("TILDE");S[_.TILDE]="^"+S[_.LONETILDE]+S[_.XRANGEPLAIN]+"$";V("TILDELOOSE");S[_.TILDELOOSE]="^"+S[_.LONETILDE]+S[_.XRANGEPLAINLOOSE]+"$";V("LONECARET");S[_.LONECARET]="(?:\\^)";V("CARETTRIM");S[_.CARETTRIM]="(\\s*)"+S[_.LONECARET]+"\\s+";te[_.CARETTRIM]=new RegExp(S[_.CARETTRIM],"g");var va="$1^";V("CARET");S[_.CARET]="^"+S[_.LONECARET]+S[_.XRANGEPLAIN]+"$";V("CARETLOOSE");S[_.CARETLOOSE]="^"+S[_.LONECARET]+S[_.XRANGEPLAINLOOSE]+"$";V("COMPARATORLOOSE");S[_.COMPARATORLOOSE]="^"+S[_.GTLT]+"\\s*("+S[_.LOOSEPLAIN]+")$|^$";V("COMPARATOR");S[_.COMPARATOR]="^"+S[_.GTLT]+"\\s*("+S[_.FULLPLAIN]+")$|^$";V("COMPARATORTRIM");S[_.COMPARATORTRIM]="(\\s*)"+S[_.GTLT]+"\\s*("+S[_.LOOSEPLAIN]+"|"+S[_.XRANGEPLAIN]+")";te[_.COMPARATORTRIM]=new RegExp(S[_.COMPARATORTRIM],"g");var ya="$1$2$3";V("HYPHENRANGE");S[_.HYPHENRANGE]="^\\s*("+S[_.XRANGEPLAIN]+")\\s+-\\s+("+S[_.XRANGEPLAIN]+")\\s*$";V("HYPHENRANGELOOSE");S[_.HYPHENRANGELOOSE]="^\\s*("+S[_.XRANGEPLAINLOOSE]+")\\s+-\\s+("+S[_.XRANGEPLAINLOOSE]+")\\s*$";V("STAR");S[_.STAR]="(<|>)?=?\\s*\\*";for(pt=0;pt<Vn;pt++)ne(pt,S[pt]),te[pt]||(te[pt]=new RegExp(S[pt]));var pt;z.parse=Dt;function Dt(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof G)return t;if(typeof t!="string"||t.length>zr)return null;var r=e.loose?te[_.LOOSE]:te[_.FULL];if(!r.test(t))return null;try{return new G(t,e)}catch{return null}}z.valid=Ca;function Ca(t,e){var r=Dt(t,e);return r?r.version:null}z.clean=Ra;function Ra(t,e){var r=Dt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}z.SemVer=G;function G(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof G){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>zr)throw new TypeError("version is longer than "+zr+" characters");if(!(this instanceof G))return new G(t,e);ne("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?te[_.LOOSE]:te[_.FULL]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>hr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var o=+n;if(o>=0&&o<hr)return o}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};G.prototype.toString=function(){return this.version};G.prototype.compare=function(t){return ne("SemVer.compare",this.version,this.options,t),t instanceof G||(t=new G(t,this.options)),this.compareMain(t)||this.comparePre(t)};G.prototype.compareMain=function(t){return t instanceof G||(t=new G(t,this.options)),St(this.major,t.major)||St(this.minor,t.minor)||St(this.patch,t.patch)};G.prototype.comparePre=function(t){if(t instanceof G||(t=new G(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(ne("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return St(r,n)}while(++e)};G.prototype.compareBuild=function(t){t instanceof G||(t=new G(t,this.options));var e=0;do{var r=this.build[e],n=t.build[e];if(ne("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return St(r,n)}while(++e)};G.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};z.inc=_a;function _a(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new G(t,r).inc(e,n).version}catch{return null}}z.diff=wa;function wa(t,e){if($r(t,e))return null;var r=Dt(t),n=Dt(e),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var a="prerelease"}for(var u in r)if((u==="major"||u==="minor"||u==="patch")&&r[u]!==n[u])return o+u;return a}z.compareIdentifiers=St;var Bn=/^[0-9]+$/;function St(t,e){var r=Bn.test(t),n=Bn.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}z.rcompareIdentifiers=Ta;function Ta(t,e){return St(e,t)}z.major=Ea;function Ea(t,e){return new G(t,e).major}z.minor=Pa;function Pa(t,e){return new G(t,e).minor}z.patch=Sa;function Sa(t,e){return new G(t,e).patch}z.compare=it;function it(t,e,r){return new G(t,r).compare(new G(e,r))}z.compareLoose=Da;function Da(t,e){return it(t,e,!0)}z.compareBuild=ba;function ba(t,e,r){var n=new G(t,r),o=new G(e,r);return n.compare(o)||n.compareBuild(o)}z.rcompare=Oa;function Oa(t,e,r){return it(e,t,r)}z.sort=qa;function qa(t,e){return t.sort(function(r,n){return z.compareBuild(r,n,e)})}z.rsort=ka;function ka(t,e){return t.sort(function(r,n){return z.compareBuild(n,r,e)})}z.gt=Vt;function Vt(t,e,r){return it(t,e,r)>0}z.lt=pr;function pr(t,e,r){return it(t,e,r)<0}z.eq=$r;function $r(t,e,r){return it(t,e,r)===0}z.neq=Qn;function Qn(t,e,r){return it(t,e,r)!==0}z.gte=Ur;function Ur(t,e,r){return it(t,e,r)>=0}z.lte=Gr;function Gr(t,e,r){return it(t,e,r)<=0}z.cmp=gr;function gr(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return $r(t,r,n);case"!=":return Qn(t,r,n);case">":return Vt(t,r,n);case">=":return Ur(t,r,n);case"<":return pr(t,r,n);case"<=":return Gr(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}z.Comparator=Fe;function Fe(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Fe){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Fe))return new Fe(t,e);ne("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===Lt?this.value="":this.value=this.operator+this.semver.version,ne("comp",this)}var Lt={};Fe.prototype.parse=function(t){var e=this.options.loose?te[_.COMPARATORLOOSE]:te[_.COMPARATOR],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=Lt};Fe.prototype.toString=function(){return this.value};Fe.prototype.test=function(t){if(ne("Comparator.test",t,this.options.loose),this.semver===Lt||t===Lt)return!0;if(typeof t=="string")try{t=new G(t,this.options)}catch{return!1}return gr(t,this.operator,this.semver,this.options)};Fe.prototype.intersects=function(t,e){if(!(t instanceof Fe))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return this.value===""?!0:(r=new de(t.value,e),mr(this.value,r,e));if(t.operator==="")return t.value===""?!0:(r=new de(this.value,e),mr(t.semver,r,e));var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),a=this.semver.version===t.semver.version,u=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),l=gr(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),d=gr(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||a&&u||l||d};z.Range=de;function de(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof de)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new de(t.raw,e);if(t instanceof Fe)return new de(t.value,e);if(!(this instanceof de))return new de(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}de.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};de.prototype.toString=function(){return this.range};de.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?te[_.HYPHENRANGELOOSE]:te[_.HYPHENRANGE];t=t.replace(r,Wa),ne("hyphen replace",t),t=t.replace(te[_.COMPARATORTRIM],ya),ne("comparator trim",t,te[_.COMPARATORTRIM]),t=t.replace(te[_.TILDETRIM],ma),t=t.replace(te[_.CARETTRIM],va),t=t.split(/\s+/).join(" ");var n=e?te[_.COMPARATORLOOSE]:te[_.COMPARATOR],o=t.split(" ").map(function(a){return Ia(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter(function(a){return!!a.match(n)})),o=o.map(function(a){return new Fe(a,this.options)},this),o};de.prototype.intersects=function(t,e){if(!(t instanceof de))throw new TypeError("a Range is required");return this.set.some(function(r){return Jn(r,e)&&t.set.some(function(n){return Jn(n,e)&&r.every(function(o){return n.every(function(a){return o.intersects(a,e)})})})})};function Jn(t,e){for(var r=!0,n=t.slice(),o=n.pop();r&&n.length;)r=n.every(function(a){return o.intersects(a,e)}),o=n.pop();return r}z.toComparators=xa;function xa(t,e){return new de(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Ia(t,e){return ne("comp",t,e),t=La(t,e),ne("caret",t),t=Na(t,e),ne("tildes",t),t=Aa(t,e),ne("xrange",t),t=ja(t,e),ne("stars",t),t}function Se(t){return!t||t.toLowerCase()==="x"||t==="*"}function Na(t,e){return t.trim().split(/\s+/).map(function(r){return Fa(r,e)}).join(" ")}function Fa(t,e){var r=e.loose?te[_.TILDELOOSE]:te[_.TILDE];return t.replace(r,function(n,o,a,u,l){ne("tilde",t,n,o,a,u,l);var d;return Se(o)?d="":Se(a)?d=">="+o+".0.0 <"+(+o+1)+".0.0":Se(u)?d=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0":l?(ne("replaceTilde pr",l),d=">="+o+"."+a+"."+u+"-"+l+" <"+o+"."+(+a+1)+".0"):d=">="+o+"."+a+"."+u+" <"+o+"."+(+a+1)+".0",ne("tilde return",d),d})}function La(t,e){return t.trim().split(/\s+/).map(function(r){return Ma(r,e)}).join(" ")}function Ma(t,e){ne("caret",t,e);var r=e.loose?te[_.CARETLOOSE]:te[_.CARET];return t.replace(r,function(n,o,a,u,l){ne("caret",t,n,o,a,u,l);var d;return Se(o)?d="":Se(a)?d=">="+o+".0.0 <"+(+o+1)+".0.0":Se(u)?o==="0"?d=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0":d=">="+o+"."+a+".0 <"+(+o+1)+".0.0":l?(ne("replaceCaret pr",l),o==="0"?a==="0"?d=">="+o+"."+a+"."+u+"-"+l+" <"+o+"."+a+"."+(+u+1):d=">="+o+"."+a+"."+u+"-"+l+" <"+o+"."+(+a+1)+".0":d=">="+o+"."+a+"."+u+"-"+l+" <"+(+o+1)+".0.0"):(ne("no pr"),o==="0"?a==="0"?d=">="+o+"."+a+"."+u+" <"+o+"."+a+"."+(+u+1):d=">="+o+"."+a+"."+u+" <"+o+"."+(+a+1)+".0":d=">="+o+"."+a+"."+u+" <"+(+o+1)+".0.0"),ne("caret return",d),d})}function Aa(t,e){return ne("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Ha(r,e)}).join(" ")}function Ha(t,e){t=t.trim();var r=e.loose?te[_.XRANGELOOSE]:te[_.XRANGE];return t.replace(r,function(n,o,a,u,l,d){ne("xRange",t,n,o,a,u,l,d);var m=Se(a),C=m||Se(u),v=C||Se(l),P=v;return o==="="&&P&&(o=""),d=e.includePrerelease?"-0":"",m?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&P?(C&&(u=0),l=0,o===">"?(o=">=",C?(a=+a+1,u=0,l=0):(u=+u+1,l=0)):o==="<="&&(o="<",C?a=+a+1:u=+u+1),n=o+a+"."+u+"."+l+d):C?n=">="+a+".0.0"+d+" <"+(+a+1)+".0.0"+d:v&&(n=">="+a+"."+u+".0"+d+" <"+a+"."+(+u+1)+".0"+d),ne("xRange return",n),n})}function ja(t,e){return ne("replaceStars",t,e),t.trim().replace(te[_.STAR],"")}function Wa(t,e,r,n,o,a,u,l,d,m,C,v,P){return Se(r)?e="":Se(n)?e=">="+r+".0.0":Se(o)?e=">="+r+"."+n+".0":e=">="+e,Se(d)?l="":Se(m)?l="<"+(+d+1)+".0.0":Se(C)?l="<"+d+"."+(+m+1)+".0":v?l="<="+d+"."+m+"."+C+"-"+v:l="<="+l,(e+" "+l).trim()}de.prototype.test=function(t){if(!t)return!1;if(typeof t=="string")try{t=new G(t,this.options)}catch{return!1}for(var e=0;e<this.set.length;e++)if(Ka(this.set[e],t,this.options))return!0;return!1};function Ka(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(ne(t[n].semver),t[n].semver!==Lt&&t[n].semver.prerelease.length>0){var o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}z.satisfies=mr;function mr(t,e,r){try{e=new de(e,r)}catch{return!1}return e.test(t)}z.maxSatisfying=za;function za(t,e,r){var n=null,o=null;try{var a=new de(e,r)}catch{return null}return t.forEach(function(u){a.test(u)&&(!n||o.compare(u)===-1)&&(n=u,o=new G(n,r))}),n}z.minSatisfying=$a;function $a(t,e,r){var n=null,o=null;try{var a=new de(e,r)}catch{return null}return t.forEach(function(u){a.test(u)&&(!n||o.compare(u)===1)&&(n=u,o=new G(n,r))}),n}z.minVersion=Ua;function Ua(t,e){t=new de(t,e);var r=new G("0.0.0");if(t.test(r)||(r=new G("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var o=t.set[n];o.forEach(function(a){var u=new G(a.semver.version);switch(a.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!r||Vt(r,u))&&(r=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&t.test(r)?r:null}z.validRange=Ga;function Ga(t,e){try{return new de(t,e).range||"*"}catch{return null}}z.ltr=Xa;function Xa(t,e,r){return Xr(t,e,"<",r)}z.gtr=Ba;function Ba(t,e,r){return Xr(t,e,">",r)}z.outside=Xr;function Xr(t,e,r,n){t=new G(t,n),e=new de(e,n);var o,a,u,l,d;switch(r){case">":o=Vt,a=Gr,u=pr,l=">",d=">=";break;case"<":o=pr,a=Ur,u=Vt,l="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(mr(t,e,n))return!1;for(var m=0;m<e.set.length;++m){var C=e.set[m],v=null,P=null;if(C.forEach(function(D){D.semver===Lt&&(D=new Fe(">=0.0.0")),v=v||D,P=P||D,o(D.semver,v.semver,n)?v=D:u(D.semver,P.semver,n)&&(P=D)}),v.operator===l||v.operator===d||(!P.operator||P.operator===l)&&a(t,P.semver))return!1;if(P.operator===d&&u(t,P.semver))return!1}return!0}z.prerelease=Ja;function Ja(t,e){var r=Dt(t,e);return r&&r.prerelease.length?r.prerelease:null}z.intersects=Va;function Va(t,e,r){return t=new de(t,r),e=new de(e,r),t.intersects(e)}z.coerce=Qa;function Qa(t,e){if(t instanceof G)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};var r=null;if(!e.rtl)r=t.match(te[_.COERCE]);else{for(var n;(n=te[_.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),te[_.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;te[_.COERCERTL].lastIndex=-1}return r===null?null:Dt(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),e)}});var Mt=W(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});function Ya(t){return t===!0||t===!1}st.boolean=Ya;function ei(t){return typeof t=="string"||t instanceof String}st.string=ei;function Za(t){return typeof t=="number"||t instanceof Number}st.number=Za;function ec(t){return t instanceof Error}st.error=ec;function tc(t){return typeof t=="function"}st.func=tc;function ti(t){return Array.isArray(t)}st.array=ti;function rc(t){return ti(t)&&t.every(e=>ei(e))}st.stringArray=rc});var Pi=W(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});var bt=Mt(),ri;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.serverErrorStart=-32099,t.serverErrorEnd=-32e3,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.RequestCancelled=-32800,t.ContentModified=-32801,t.MessageWriteError=1,t.MessageReadError=2})(ri=re.ErrorCodes||(re.ErrorCodes={}));var vr=class extends Error{constructor(e,r,n){super(r);this.code=bt.number(e)?e:ri.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,vr.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};re.ResponseError=vr;var le=class{constructor(e,r){this._method=e,this._numberOfParams=r}get method(){return this._method}get numberOfParams(){return this._numberOfParams}};re.AbstractMessageType=le;var ni=class extends le{constructor(e){super(e,0)}};re.RequestType0=ni;var ii=class extends le{constructor(e){super(e,1)}};re.RequestType=ii;var si=class extends le{constructor(e){super(e,1)}};re.RequestType1=si;var oi=class extends le{constructor(e){super(e,2)}};re.RequestType2=oi;var ai=class extends le{constructor(e){super(e,3)}};re.RequestType3=ai;var ci=class extends le{constructor(e){super(e,4)}};re.RequestType4=ci;var ui=class extends le{constructor(e){super(e,5)}};re.RequestType5=ui;var li=class extends le{constructor(e){super(e,6)}};re.RequestType6=li;var di=class extends le{constructor(e){super(e,7)}};re.RequestType7=di;var fi=class extends le{constructor(e){super(e,8)}};re.RequestType8=fi;var hi=class extends le{constructor(e){super(e,9)}};re.RequestType9=hi;var pi=class extends le{constructor(e){super(e,1);this._=void 0}};re.NotificationType=pi;var gi=class extends le{constructor(e){super(e,0)}};re.NotificationType0=gi;var mi=class extends le{constructor(e){super(e,1)}};re.NotificationType1=mi;var vi=class extends le{constructor(e){super(e,2)}};re.NotificationType2=vi;var yi=class extends le{constructor(e){super(e,3)}};re.NotificationType3=yi;var Ci=class extends le{constructor(e){super(e,4)}};re.NotificationType4=Ci;var Ri=class extends le{constructor(e){super(e,5)}};re.NotificationType5=Ri;var _i=class extends le{constructor(e){super(e,6)}};re.NotificationType6=_i;var wi=class extends le{constructor(e){super(e,7)}};re.NotificationType7=wi;var Ti=class extends le{constructor(e){super(e,8)}};re.NotificationType8=Ti;var Ei=class extends le{constructor(e){super(e,9)}};re.NotificationType9=Ei;function nc(t){let e=t;return e&&bt.string(e.method)&&(bt.string(e.id)||bt.number(e.id))}re.isRequestMessage=nc;function ic(t){let e=t;return e&&bt.string(e.method)&&t.id===void 0}re.isNotificationMessage=ic;function sc(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(bt.string(e.id)||bt.number(e.id)||e.id===null)}re.isResponseMessage=sc});var Yt=W(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});var oc;(function(t){function e(r){return{dispose:r}}t.create=e})(oc=Ot.Disposable||(Ot.Disposable={}));var ac;(function(t){let e={dispose(){}};t.None=function(){return e}})(ac=Ot.Event||(Ot.Event={}));var Si=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!!this._callbacks){for(var n=!1,o=0,a=this._callbacks.length;o<a;o++)if(this._callbacks[o]===e)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0),a=0,u=n.length;a<u;a++)try{r.push(n[a].apply(o[a],e))}catch(l){console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Qt=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Si),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let o;return o={dispose:()=>{this._callbacks.remove(e,r),o.dispose=Qt._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Ot.Emitter=Qt;Qt._noop=function(){}});var Cr=W(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});var Br=Yt(),At=Mt(),Jr=8192,Di=Buffer.from("\r","ascii")[0],bi=Buffer.from(`
`,"ascii")[0],cc=`\r
`,Oi=class{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(Jr)}append(e){var r=e;if(typeof e=="string"){var n=e,o=Buffer.byteLength(n,this.encoding);r=Buffer.allocUnsafe(o),r.write(n,0,o,this.encoding)}if(this.buffer.length-this.index>=r.length)r.copy(this.buffer,this.index,0,r.length);else{var a=(Math.ceil((this.index+r.length)/Jr)+1)*Jr;this.index===0?(this.buffer=Buffer.allocUnsafe(a),r.copy(this.buffer,0,0,r.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),r],a)}this.index+=r.length}tryReadHeaders(){let e,r=0;for(;r+3<this.index&&(this.buffer[r]!==Di||this.buffer[r+1]!==bi||this.buffer[r+2]!==Di||this.buffer[r+3]!==bi);)r++;if(r+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,r).split(cc).forEach(a=>{let u=a.indexOf(":");if(u===-1)throw new Error("Message header must separate key and value using :");let l=a.substr(0,u),d=a.substr(u+1).trim();e[l]=d});let o=r+4;return this.buffer=this.buffer.slice(o),this.index=this.index-o,e}tryReadContent(e){if(this.index<e)return null;let r=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,r}get numberOfBytes(){return this.index}},uc;(function(t){function e(r){let n=r;return n&&At.func(n.listen)&&At.func(n.dispose)&&At.func(n.onError)&&At.func(n.onClose)&&At.func(n.onPartialMessage)}t.is=e})(uc=gt.MessageReader||(gt.MessageReader={}));var yr=class{constructor(){this.errorEmitter=new Br.Emitter,this.closeEmitter=new Br.Emitter,this.partialMessageEmitter=new Br.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${At.string(e.message)?e.message:"unknown"}`)}};gt.AbstractMessageReader=yr;var Vr=class extends yr{constructor(e,r="utf8"){super();this.readable=e,this.buffer=new Oi(r),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",r=>{this.onData(r)}),this.readable.on("error",r=>this.fireError(r)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let o=this.buffer.tryReadHeaders();if(!o)return;let a=o["Content-Length"];if(!a)throw new Error("Header must provide a Content-Length property.");let u=parseInt(a);if(isNaN(u))throw new Error("Content-Length value must be a number.");this.nextMessageLength=u}var r=this.buffer.tryReadContent(this.nextMessageLength);if(r===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(r);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};gt.StreamMessageReader=Vr;var qi=class extends yr{constructor(e){super();this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};gt.IPCMessageReader=qi;var ki=class extends Vr{constructor(e,r="utf-8"){super(e,r)}};gt.SocketMessageReader=ki});var _r=W(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});var xi=Yt(),Zt=Mt(),Ii="Content-Length: ",Rr=`\r
`,lc;(function(t){function e(r){let n=r;return n&&Zt.func(n.dispose)&&Zt.func(n.onClose)&&Zt.func(n.onError)&&Zt.func(n.write)}t.is=e})(lc=mt.MessageWriter||(mt.MessageWriter={}));var er=class{constructor(){this.errorEmitter=new xi.Emitter,this.closeEmitter=new xi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Zt.string(e.message)?e.message:"unknown"}`)}};mt.AbstractMessageWriter=er;var Ni=class extends er{constructor(e,r="utf8"){super();this.writable=e,this.encoding=r,this.errorCount=0,this.writable.on("error",n=>this.fireError(n)),this.writable.on("close",()=>this.fireClose())}write(e){let r=JSON.stringify(e),n=Buffer.byteLength(r,this.encoding),o=[Ii,n.toString(),Rr,Rr];try{this.writable.write(o.join(""),"ascii"),this.writable.write(r,this.encoding),this.errorCount=0}catch(a){this.errorCount++,this.fireError(a,e,this.errorCount)}}};mt.StreamMessageWriter=Ni;var Fi=class extends er{constructor(e){super();this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,r=>{this.sending=!1,r?(this.errorCount++,this.fireError(r,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(r){this.errorCount++,this.fireError(r,e,this.errorCount)}}};mt.IPCMessageWriter=Fi;var Li=class extends er{constructor(e,r="utf8"){super();this.socket=e,this.queue=[],this.sending=!1,this.encoding=r,this.errorCount=0,this.socket.on("error",n=>this.fireError(n)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){let r=JSON.stringify(e),n=Buffer.byteLength(r,this.encoding),o=[Ii,n.toString(),Rr,Rr];try{this.sending=!0,this.socket.write(o.join(""),"ascii",a=>{a&&this.handleError(a,e);try{this.socket.write(r,this.encoding,u=>{this.sending=!1,u?this.handleError(u,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(u){this.handleError(u,e)}})}catch(a){this.handleError(a,e)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}};mt.SocketMessageWriter=Li});var Ai=W(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});var Qr=Yt(),dc=Mt(),Yr;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qr.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qr.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||dc.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(Yr=tr.CancellationToken||(tr.CancellationToken={}));var fc=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Zr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?fc:(this._emitter||(this._emitter=new Qr.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Mi=class{get token(){return this._token||(this._token=new Zr),this._token}cancel(){this._token?this._token.cancel():this._token=Yr.Cancelled}dispose(){this._token?this._token instanceof Zr&&this._token.dispose():this._token=Yr.None}};tr.CancellationTokenSource=Mi});var ji=W(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var Xe;(function(t){t.None=0,t.First=1,t.Last=2})(Xe=rr.Touch||(rr.Touch={}));var Hi=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){let r=this._map.get(e);if(!!r)return r.value}set(e,r,n=Xe.None){let o=this._map.get(e);if(o)o.value=r,n!==Xe.None&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case Xe.None:this.addItemLast(o);break;case Xe.First:this.addItemFirst(o);break;case Xe.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}}delete(e){let r=this._map.get(e);return r?(this._map.delete(e),this.removeItem(r),this._size--,!0):!1}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._head;for(;n;)r?e.bind(r)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,r){let n=this._tail;for(;n;)r?e.bind(r)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],r=this._head;for(;r;)e.push(r.value),r=r.next;return e}keys(){let e=[],r=this._head;for(;r;)e.push(r.key),r=r.next;return e}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Xe.First&&r!==Xe.Last)){if(r===Xe.First){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(r===Xe.Last){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}};rr.LinkedMap=Hi});var $i=W(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});var hc=require("path"),pc=require("os"),gc=require("crypto"),Wi=require("net"),Ki=Cr(),zi=_r();function mc(){let t=gc.randomBytes(21).toString("hex");return process.platform==="win32"?`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`:hc.join(pc.tmpdir(),`vscode-${t}.sock`)}nr.generateRandomPipeName=mc;function vc(t,e="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let u=Wi.createServer(l=>{u.close(),r([new Ki.SocketMessageReader(l,e),new zi.SocketMessageWriter(l,e)])});u.on("error",a),u.listen(t,()=>{u.removeListener("error",a),o({onConnected:()=>n})})})}nr.createClientPipeTransport=vc;function yc(t,e="utf-8"){let r=Wi.createConnection(t);return[new Ki.SocketMessageReader(r,e),new zi.SocketMessageWriter(r,e)]}nr.createServerPipeTransport=yc});var Bi=W(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});var Ui=require("net"),Gi=Cr(),Xi=_r();function Cc(t,e="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let u=Ui.createServer(l=>{u.close(),r([new Gi.SocketMessageReader(l,e),new Xi.SocketMessageWriter(l,e)])});u.on("error",a),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",a),o({onConnected:()=>n})})})}wr.createClientSocketTransport=Cc;function Rc(t,e="utf-8"){let r=Ui.createConnection(t,"127.0.0.1");return[new Gi.SocketMessageReader(r,e),new Xi.SocketMessageWriter(r,e)]}wr.createServerSocketTransport=Rc});var Ke=W(x=>{"use strict";function Vi(t){for(var e in t)x.hasOwnProperty(e)||(x[e]=t[e])}Object.defineProperty(x,"__esModule",{value:!0});var ye=Mt(),H=Pi();x.RequestType=H.RequestType;x.RequestType0=H.RequestType0;x.RequestType1=H.RequestType1;x.RequestType2=H.RequestType2;x.RequestType3=H.RequestType3;x.RequestType4=H.RequestType4;x.RequestType5=H.RequestType5;x.RequestType6=H.RequestType6;x.RequestType7=H.RequestType7;x.RequestType8=H.RequestType8;x.RequestType9=H.RequestType9;x.ResponseError=H.ResponseError;x.ErrorCodes=H.ErrorCodes;x.NotificationType=H.NotificationType;x.NotificationType0=H.NotificationType0;x.NotificationType1=H.NotificationType1;x.NotificationType2=H.NotificationType2;x.NotificationType3=H.NotificationType3;x.NotificationType4=H.NotificationType4;x.NotificationType5=H.NotificationType5;x.NotificationType6=H.NotificationType6;x.NotificationType7=H.NotificationType7;x.NotificationType8=H.NotificationType8;x.NotificationType9=H.NotificationType9;var sr=Cr();x.MessageReader=sr.MessageReader;x.StreamMessageReader=sr.StreamMessageReader;x.IPCMessageReader=sr.IPCMessageReader;x.SocketMessageReader=sr.SocketMessageReader;var or=_r();x.MessageWriter=or.MessageWriter;x.StreamMessageWriter=or.StreamMessageWriter;x.IPCMessageWriter=or.IPCMessageWriter;x.SocketMessageWriter=or.SocketMessageWriter;var vt=Yt();x.Disposable=vt.Disposable;x.Event=vt.Event;x.Emitter=vt.Emitter;var Ht=Ai();x.CancellationTokenSource=Ht.CancellationTokenSource;x.CancellationToken=Ht.CancellationToken;var Ji=ji();Vi($i());Vi(Bi());var ir;(function(t){t.type=new H.NotificationType("$/cancelRequest")})(ir||(ir={}));var Er;(function(t){t.type=new H.NotificationType("$/progress")})(Er||(Er={}));var Qi=class{constructor(){}};x.ProgressType=Qi;x.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var he;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(he=x.Trace||(x.Trace={}));(function(t){function e(n){if(!ye.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(he=x.Trace||(x.Trace={}));var je;(function(t){t.Text="text",t.JSON="json"})(je=x.TraceFormat||(x.TraceFormat={}));(function(t){function e(r){return r=r.toLowerCase(),r==="json"?t.JSON:t.Text}t.fromString=e})(je=x.TraceFormat||(x.TraceFormat={}));var Yi;(function(t){t.type=new H.NotificationType("$/setTraceNotification")})(Yi=x.SetTraceNotification||(x.SetTraceNotification={}));var en;(function(t){t.type=new H.NotificationType("$/logTraceNotification")})(en=x.LogTraceNotification||(x.LogTraceNotification={}));var Tr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Tr=x.ConnectionErrors||(x.ConnectionErrors={}));var qt=class extends Error{constructor(e,r){super(r);this.code=e,Object.setPrototypeOf(this,qt.prototype)}};x.ConnectionError=qt;var _c;(function(t){function e(r){let n=r;return n&&ye.func(n.cancelUndispatched)}t.is=e})(_c=x.ConnectionStrategy||(x.ConnectionStrategy={}));var We;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(We||(We={}));function wc(t,e,r,n){let o=0,a=0,u=0,l="2.0",d,m=Object.create(null),C,v=Object.create(null),P=new Map,D,A=new Ji.LinkedMap,M=Object.create(null),K=Object.create(null),k=he.Off,F=je.Text,q,J=We.New,Ie=new vt.Emitter,Me=new vt.Emitter,Ue=new vt.Emitter,Re=new vt.Emitter,Oe=new vt.Emitter;function Ve(i){return"req-"+i.toString()}function Ge(i){return i===null?"res-unknown-"+(++u).toString():"res-"+i.toString()}function _e(){return"not-"+(++a).toString()}function Qe(i,s){H.isRequestMessage(s)?i.set(Ve(s.id),s):H.isResponseMessage(s)?i.set(Ge(s.id),s):i.set(_e(),s)}function Ne(i){}function ct(){return J===We.Listening}function Ye(){return J===We.Closed}function qe(){return J===We.Disposed}function Ae(){(J===We.New||J===We.Listening)&&(J=We.Closed,Me.fire(void 0))}function ut(i){Ie.fire([i,void 0,void 0])}function lt(i){Ie.fire(i)}t.onClose(Ae),t.onError(ut),e.onClose(Ae),e.onError(lt);function Ze(){D||A.size===0||(D=setImmediate(()=>{D=void 0,dt()}))}function dt(){if(A.size===0)return;let i=A.shift();try{H.isRequestMessage(i)?et(i):H.isNotificationMessage(i)?Tt(i):H.isResponseMessage(i)?ft(i):tt(i)}finally{Ze()}}let wt=i=>{try{if(H.isNotificationMessage(i)&&i.method===ir.type.method){let s=Ve(i.params.id),p=A.get(s);if(H.isRequestMessage(p)){let g=n&&n.cancelUndispatched?n.cancelUndispatched(p,Ne):void 0;if(g&&(g.error!==void 0||g.result!==void 0)){A.delete(s),g.id=p.id,Ee(g,i.method,Date.now()),e.write(g);return}}}Qe(A,i)}finally{Ze()}};function et(i){if(qe())return;function s(U,ce,c){let E={jsonrpc:l,id:i.id};U instanceof H.ResponseError?E.error=U.toJson():E.result=U===void 0?null:U,Ee(E,ce,c),e.write(E)}function p(U,ce,c){let E={jsonrpc:l,id:i.id,error:U.toJson()};Ee(E,ce,c),e.write(E)}function g(U,ce,c){U===void 0&&(U=null);let E={jsonrpc:l,id:i.id,result:U};Ee(E,ce,c),e.write(E)}Pt(i);let O=m[i.method],$,Z;O&&($=O.type,Z=O.handler);let j=Date.now();if(Z||d){let U=new Ht.CancellationTokenSource,ce=String(i.id);K[ce]=U;try{let c;i.params===void 0||$!==void 0&&$.numberOfParams===0?c=Z?Z(U.token):d(i.method,U.token):ye.array(i.params)&&($===void 0||$.numberOfParams>1)?c=Z?Z(...i.params,U.token):d(i.method,...i.params,U.token):c=Z?Z(i.params,U.token):d(i.method,i.params,U.token);let E=c;c?E.then?E.then(b=>{delete K[ce],s(b,i.method,j)},b=>{delete K[ce],b instanceof H.ResponseError?p(b,i.method,j):b&&ye.string(b.message)?p(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${i.method} failed with message: ${b.message}`),i.method,j):p(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,j)}):(delete K[ce],s(c,i.method,j)):(delete K[ce],g(c,i.method,j))}catch(c){delete K[ce],c instanceof H.ResponseError?s(c,i.method,j):c&&ye.string(c.message)?p(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${i.method} failed with message: ${c.message}`),i.method,j):p(new H.ResponseError(H.ErrorCodes.InternalError,`Request ${i.method} failed unexpectedly without providing any details.`),i.method,j)}}else p(new H.ResponseError(H.ErrorCodes.MethodNotFound,`Unhandled method ${i.method}`),i.method,j)}function ft(i){if(!qe())if(i.id===null)i.error?r.error(`Received response message without id: Error is: 
${JSON.stringify(i.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{let s=String(i.id),p=M[s];if(nt(i,p),p){delete M[s];try{if(i.error){let g=i.error;p.reject(new H.ResponseError(g.code,g.message,g.data))}else if(i.result!==void 0)p.resolve(i.result);else throw new Error("Should never happen.")}catch(g){g.message?r.error(`Response handler '${p.method}' failed with message: ${g.message}`):r.error(`Response handler '${p.method}' failed unexpectedly.`)}}}}function Tt(i){if(qe())return;let s,p;if(i.method===ir.type.method)p=g=>{let O=g.id,$=K[String(O)];$&&$.cancel()};else{let g=v[i.method];g&&(p=g.handler,s=g.type)}if(p||C)try{Pe(i),i.params===void 0||s!==void 0&&s.numberOfParams===0?p?p():C(i.method):ye.array(i.params)&&(s===void 0||s.numberOfParams>1)?p?p(...i.params):C(i.method,...i.params):p?p(i.params):C(i.method,i.params)}catch(g){g.message?r.error(`Notification handler '${i.method}' failed with message: ${g.message}`):r.error(`Notification handler '${i.method}' failed unexpectedly.`)}else Ue.fire(i)}function tt(i){if(!i){r.error("Received empty message.");return}r.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(i,null,4)}`);let s=i;if(ye.string(s.id)||ye.number(s.id)){let p=String(s.id),g=M[p];g&&g.reject(new Error("The received response has neither a result nor an error property."))}}function Et(i){if(!(k===he.Off||!q))if(F===je.Text){let s;k===he.Verbose&&i.params&&(s=`Params: ${JSON.stringify(i.params,null,4)}

`),q.log(`Sending request '${i.method} - (${i.id})'.`,s)}else De("send-request",i)}function rt(i){if(!(k===he.Off||!q))if(F===je.Text){let s;k===he.Verbose&&(i.params?s=`Params: ${JSON.stringify(i.params,null,4)}

`:s=`No parameters provided.

`),q.log(`Sending notification '${i.method}'.`,s)}else De("send-notification",i)}function Ee(i,s,p){if(!(k===he.Off||!q))if(F===je.Text){let g;k===he.Verbose&&(i.error&&i.error.data?g=`Error data: ${JSON.stringify(i.error.data,null,4)}

`:i.result?g=`Result: ${JSON.stringify(i.result,null,4)}

`:i.error===void 0&&(g=`No result returned.

`)),q.log(`Sending response '${s} - (${i.id})'. Processing request took ${Date.now()-p}ms`,g)}else De("send-response",i)}function Pt(i){if(!(k===he.Off||!q))if(F===je.Text){let s;k===he.Verbose&&i.params&&(s=`Params: ${JSON.stringify(i.params,null,4)}

`),q.log(`Received request '${i.method} - (${i.id})'.`,s)}else De("receive-request",i)}function Pe(i){if(!(k===he.Off||!q||i.method===en.type.method))if(F===je.Text){let s;k===he.Verbose&&(i.params?s=`Params: ${JSON.stringify(i.params,null,4)}

`:s=`No parameters provided.

`),q.log(`Received notification '${i.method}'.`,s)}else De("receive-notification",i)}function nt(i,s){if(!(k===he.Off||!q))if(F===je.Text){let p;if(k===he.Verbose&&(i.error&&i.error.data?p=`Error data: ${JSON.stringify(i.error.data,null,4)}

`:i.result?p=`Result: ${JSON.stringify(i.result,null,4)}

`:i.error===void 0&&(p=`No result returned.

`)),s){let g=i.error?` Request failed: ${i.error.message} (${i.error.code}).`:"";q.log(`Received response '${s.method} - (${i.id})' in ${Date.now()-s.timerStart}ms.${g}`,p)}else q.log(`Received response ${i.id} without active response promise.`,p)}else De("receive-response",i)}function De(i,s){if(!q||k===he.Off)return;let p={isLSPMessage:!0,type:i,message:s,timestamp:Date.now()};q.log(p)}function He(){if(Ye())throw new qt(Tr.Closed,"Connection is closed.");if(qe())throw new qt(Tr.Disposed,"Connection is disposed.")}function ht(){if(ct())throw new qt(Tr.AlreadyListening,"Connection is already listening")}function w(){if(!ct())throw new Error("Call listen() first.")}function f(i){return i===void 0?null:i}function y(i,s){let p,g=i.numberOfParams;switch(g){case 0:p=null;break;case 1:p=f(s[0]);break;default:p=[];for(let O=0;O<s.length&&O<g;O++)p.push(f(s[O]));if(s.length<g)for(let O=s.length;O<g;O++)p.push(null);break}return p}let R={sendNotification:(i,...s)=>{He();let p,g;if(ye.string(i))switch(p=i,s.length){case 0:g=null;break;case 1:g=s[0];break;default:g=s;break}else p=i.method,g=y(i,s);let O={jsonrpc:l,method:p,params:g};rt(O),e.write(O)},onNotification:(i,s)=>{He(),ye.func(i)?C=i:s&&(ye.string(i)?v[i]={type:void 0,handler:s}:v[i.method]={type:i,handler:s})},onProgress:(i,s,p)=>{if(P.has(s))throw new Error(`Progress handler for token ${s} already registered`);return P.set(s,p),{dispose:()=>{P.delete(s)}}},sendProgress:(i,s,p)=>{R.sendNotification(Er.type,{token:s,value:p})},onUnhandledProgress:Re.event,sendRequest:(i,...s)=>{He(),w();let p,g,O;if(ye.string(i))switch(p=i,s.length){case 0:g=null;break;case 1:Ht.CancellationToken.is(s[0])?(g=null,O=s[0]):g=f(s[0]);break;default:let j=s.length-1;Ht.CancellationToken.is(s[j])?(O=s[j],s.length===2?g=f(s[0]):g=s.slice(0,j).map(U=>f(U))):g=s.map(U=>f(U));break}else{p=i.method,g=y(i,s);let j=i.numberOfParams;O=Ht.CancellationToken.is(s[j])?s[j]:void 0}let $=o++,Z=new Promise((j,U)=>{let ce={jsonrpc:l,id:$,method:p,params:g},c={method:p,timerStart:Date.now(),resolve:j,reject:U};Et(ce);try{e.write(ce)}catch(E){c.reject(new H.ResponseError(H.ErrorCodes.MessageWriteError,E.message?E.message:"Unknown reason")),c=null}c&&(M[String($)]=c)});return O&&O.onCancellationRequested(()=>{R.sendNotification(ir.type,{id:$})}),Z},onRequest:(i,s)=>{He(),ye.func(i)?d=i:s&&(ye.string(i)?m[i]={type:void 0,handler:s}:m[i.method]={type:i,handler:s})},trace:(i,s,p)=>{let g=!1,O=je.Text;p!==void 0&&(ye.boolean(p)?g=p:(g=p.sendNotification||!1,O=p.traceFormat||je.Text)),k=i,F=O,k===he.Off?q=void 0:q=s,g&&!Ye()&&!qe()&&R.sendNotification(Yi.type,{value:he.toString(i)})},onError:Ie.event,onClose:Me.event,onUnhandledNotification:Ue.event,onDispose:Oe.event,dispose:()=>{if(qe())return;J=We.Disposed,Oe.fire(void 0);let i=new Error("Connection got disposed.");Object.keys(M).forEach(s=>{M[s].reject(i)}),M=Object.create(null),K=Object.create(null),A=new Ji.LinkedMap,ye.func(e.dispose)&&e.dispose(),ye.func(t.dispose)&&t.dispose()},listen:()=>{He(),ht(),J=We.Listening,t.listen(wt)},inspect:()=>{console.log("inspect")}};return R.onNotification(en.type,i=>{k===he.Off||!q||q.log(i.message,k===he.Verbose?i.verbose:void 0)}),R.onNotification(Er.type,i=>{let s=P.get(i.token);s?s(i.value):Re.fire(i)}),R}function Tc(t){return t.listen!==void 0&&t.read===void 0}function Ec(t){return t.write!==void 0&&t.end===void 0}function Pc(t,e,r,n){r||(r=x.NullLogger);let o=Tc(t)?t:new sr.StreamMessageReader(t),a=Ec(e)?e:new or.StreamMessageWriter(e);return wc(o,a,r,n)}x.createMessageConnection=Pc});var es=W((Zi,Pr)=>{(function(t){if(typeof Pr=="object"&&typeof Pr.exports=="object"){var e=t(require,Zi);e!==void 0&&(Pr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r;(function(f){function y(i,s){return{line:i,character:s}}f.create=y;function R(i){var s=i;return w.objectLiteral(s)&&w.number(s.line)&&w.number(s.character)}f.is=R})(r=e.Position||(e.Position={}));var n;(function(f){function y(i,s,p,g){if(w.number(i)&&w.number(s)&&w.number(p)&&w.number(g))return{start:r.create(i,s),end:r.create(p,g)};if(r.is(i)&&r.is(s))return{start:i,end:s};throw new Error("Range#create called with invalid arguments["+i+", "+s+", "+p+", "+g+"]")}f.create=y;function R(i){var s=i;return w.objectLiteral(s)&&r.is(s.start)&&r.is(s.end)}f.is=R})(n=e.Range||(e.Range={}));var o;(function(f){function y(i,s){return{uri:i,range:s}}f.create=y;function R(i){var s=i;return w.defined(s)&&n.is(s.range)&&(w.string(s.uri)||w.undefined(s.uri))}f.is=R})(o=e.Location||(e.Location={}));var a;(function(f){function y(i,s,p,g){return{targetUri:i,targetRange:s,targetSelectionRange:p,originSelectionRange:g}}f.create=y;function R(i){var s=i;return w.defined(s)&&n.is(s.targetRange)&&w.string(s.targetUri)&&(n.is(s.targetSelectionRange)||w.undefined(s.targetSelectionRange))&&(n.is(s.originSelectionRange)||w.undefined(s.originSelectionRange))}f.is=R})(a=e.LocationLink||(e.LocationLink={}));var u;(function(f){function y(i,s,p,g){return{red:i,green:s,blue:p,alpha:g}}f.create=y;function R(i){var s=i;return w.number(s.red)&&w.number(s.green)&&w.number(s.blue)&&w.number(s.alpha)}f.is=R})(u=e.Color||(e.Color={}));var l;(function(f){function y(i,s){return{range:i,color:s}}f.create=y;function R(i){var s=i;return n.is(s.range)&&u.is(s.color)}f.is=R})(l=e.ColorInformation||(e.ColorInformation={}));var d;(function(f){function y(i,s,p){return{label:i,textEdit:s,additionalTextEdits:p}}f.create=y;function R(i){var s=i;return w.string(s.label)&&(w.undefined(s.textEdit)||K.is(s))&&(w.undefined(s.additionalTextEdits)||w.typedArray(s.additionalTextEdits,K.is))}f.is=R})(d=e.ColorPresentation||(e.ColorPresentation={}));var m;(function(f){f.Comment="comment",f.Imports="imports",f.Region="region"})(m=e.FoldingRangeKind||(e.FoldingRangeKind={}));var C;(function(f){function y(i,s,p,g,O){var $={startLine:i,endLine:s};return w.defined(p)&&($.startCharacter=p),w.defined(g)&&($.endCharacter=g),w.defined(O)&&($.kind=O),$}f.create=y;function R(i){var s=i;return w.number(s.startLine)&&w.number(s.startLine)&&(w.undefined(s.startCharacter)||w.number(s.startCharacter))&&(w.undefined(s.endCharacter)||w.number(s.endCharacter))&&(w.undefined(s.kind)||w.string(s.kind))}f.is=R})(C=e.FoldingRange||(e.FoldingRange={}));var v;(function(f){function y(i,s){return{location:i,message:s}}f.create=y;function R(i){var s=i;return w.defined(s)&&o.is(s.location)&&w.string(s.message)}f.is=R})(v=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var P;(function(f){f.Error=1,f.Warning=2,f.Information=3,f.Hint=4})(P=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var D;(function(f){f.Unnecessary=1,f.Deprecated=2})(D=e.DiagnosticTag||(e.DiagnosticTag={}));var A;(function(f){function y(i,s,p,g,O,$){var Z={range:i,message:s};return w.defined(p)&&(Z.severity=p),w.defined(g)&&(Z.code=g),w.defined(O)&&(Z.source=O),w.defined($)&&(Z.relatedInformation=$),Z}f.create=y;function R(i){var s=i;return w.defined(s)&&n.is(s.range)&&w.string(s.message)&&(w.number(s.severity)||w.undefined(s.severity))&&(w.number(s.code)||w.string(s.code)||w.undefined(s.code))&&(w.string(s.source)||w.undefined(s.source))&&(w.undefined(s.relatedInformation)||w.typedArray(s.relatedInformation,v.is))}f.is=R})(A=e.Diagnostic||(e.Diagnostic={}));var M;(function(f){function y(i,s){for(var p=[],g=2;g<arguments.length;g++)p[g-2]=arguments[g];var O={title:i,command:s};return w.defined(p)&&p.length>0&&(O.arguments=p),O}f.create=y;function R(i){var s=i;return w.defined(s)&&w.string(s.title)&&w.string(s.command)}f.is=R})(M=e.Command||(e.Command={}));var K;(function(f){function y(p,g){return{range:p,newText:g}}f.replace=y;function R(p,g){return{range:{start:p,end:p},newText:g}}f.insert=R;function i(p){return{range:p,newText:""}}f.del=i;function s(p){var g=p;return w.objectLiteral(g)&&w.string(g.newText)&&n.is(g.range)}f.is=s})(K=e.TextEdit||(e.TextEdit={}));var k;(function(f){function y(i,s){return{textDocument:i,edits:s}}f.create=y;function R(i){var s=i;return w.defined(s)&&Oe.is(s.textDocument)&&Array.isArray(s.edits)}f.is=R})(k=e.TextDocumentEdit||(e.TextDocumentEdit={}));var F;(function(f){function y(i,s){var p={kind:"create",uri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(p.options=s),p}f.create=y;function R(i){var s=i;return s&&s.kind==="create"&&w.string(s.uri)&&(s.options===void 0||(s.options.overwrite===void 0||w.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||w.boolean(s.options.ignoreIfExists)))}f.is=R})(F=e.CreateFile||(e.CreateFile={}));var q;(function(f){function y(i,s,p){var g={kind:"rename",oldUri:i,newUri:s};return p!==void 0&&(p.overwrite!==void 0||p.ignoreIfExists!==void 0)&&(g.options=p),g}f.create=y;function R(i){var s=i;return s&&s.kind==="rename"&&w.string(s.oldUri)&&w.string(s.newUri)&&(s.options===void 0||(s.options.overwrite===void 0||w.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||w.boolean(s.options.ignoreIfExists)))}f.is=R})(q=e.RenameFile||(e.RenameFile={}));var J;(function(f){function y(i,s){var p={kind:"delete",uri:i};return s!==void 0&&(s.recursive!==void 0||s.ignoreIfNotExists!==void 0)&&(p.options=s),p}f.create=y;function R(i){var s=i;return s&&s.kind==="delete"&&w.string(s.uri)&&(s.options===void 0||(s.options.recursive===void 0||w.boolean(s.options.recursive))&&(s.options.ignoreIfNotExists===void 0||w.boolean(s.options.ignoreIfNotExists)))}f.is=R})(J=e.DeleteFile||(e.DeleteFile={}));var Ie;(function(f){function y(R){var i=R;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(s){return w.string(s.kind)?F.is(s)||q.is(s)||J.is(s):k.is(s)}))}f.is=y})(Ie=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Me=function(){function f(y){this.edits=y}return f.prototype.insert=function(y,R){this.edits.push(K.insert(y,R))},f.prototype.replace=function(y,R){this.edits.push(K.replace(y,R))},f.prototype.delete=function(y){this.edits.push(K.del(y))},f.prototype.add=function(y){this.edits.push(y)},f.prototype.all=function(){return this.edits},f.prototype.clear=function(){this.edits.splice(0,this.edits.length)},f}(),Ue=function(){function f(y){var R=this;this._textEditChanges=Object.create(null),y&&(this._workspaceEdit=y,y.documentChanges?y.documentChanges.forEach(function(i){if(k.is(i)){var s=new Me(i.edits);R._textEditChanges[i.textDocument.uri]=s}}):y.changes&&Object.keys(y.changes).forEach(function(i){var s=new Me(y.changes[i]);R._textEditChanges[i]=s}))}return Object.defineProperty(f.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),f.prototype.getTextEditChange=function(y){if(Oe.is(y)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var R=y,i=this._textEditChanges[R.uri];if(!i){var s=[],p={textDocument:R,edits:s};this._workspaceEdit.documentChanges.push(p),i=new Me(s),this._textEditChanges[R.uri]=i}return i}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[y];if(!i){var s=[];this._workspaceEdit.changes[y]=s,i=new Me(s),this._textEditChanges[y]=i}return i}},f.prototype.createFile=function(y,R){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(F.create(y,R))},f.prototype.renameFile=function(y,R,i){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(q.create(y,R,i))},f.prototype.deleteFile=function(y,R){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(J.create(y,R))},f.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},f}();e.WorkspaceChange=Ue;var Re;(function(f){function y(i){return{uri:i}}f.create=y;function R(i){var s=i;return w.defined(s)&&w.string(s.uri)}f.is=R})(Re=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Oe;(function(f){function y(i,s){return{uri:i,version:s}}f.create=y;function R(i){var s=i;return w.defined(s)&&w.string(s.uri)&&(s.version===null||w.number(s.version))}f.is=R})(Oe=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var Ve;(function(f){function y(i,s,p,g){return{uri:i,languageId:s,version:p,text:g}}f.create=y;function R(i){var s=i;return w.defined(s)&&w.string(s.uri)&&w.string(s.languageId)&&w.number(s.version)&&w.string(s.text)}f.is=R})(Ve=e.TextDocumentItem||(e.TextDocumentItem={}));var Ge;(function(f){f.PlainText="plaintext",f.Markdown="markdown"})(Ge=e.MarkupKind||(e.MarkupKind={})),function(f){function y(R){var i=R;return i===f.PlainText||i===f.Markdown}f.is=y}(Ge=e.MarkupKind||(e.MarkupKind={}));var _e;(function(f){function y(R){var i=R;return w.objectLiteral(R)&&Ge.is(i.kind)&&w.string(i.value)}f.is=y})(_e=e.MarkupContent||(e.MarkupContent={}));var Qe;(function(f){f.Text=1,f.Method=2,f.Function=3,f.Constructor=4,f.Field=5,f.Variable=6,f.Class=7,f.Interface=8,f.Module=9,f.Property=10,f.Unit=11,f.Value=12,f.Enum=13,f.Keyword=14,f.Snippet=15,f.Color=16,f.File=17,f.Reference=18,f.Folder=19,f.EnumMember=20,f.Constant=21,f.Struct=22,f.Event=23,f.Operator=24,f.TypeParameter=25})(Qe=e.CompletionItemKind||(e.CompletionItemKind={}));var Ne;(function(f){f.PlainText=1,f.Snippet=2})(Ne=e.InsertTextFormat||(e.InsertTextFormat={}));var ct;(function(f){f.Deprecated=1})(ct=e.CompletionItemTag||(e.CompletionItemTag={}));var Ye;(function(f){function y(R){return{label:R}}f.create=y})(Ye=e.CompletionItem||(e.CompletionItem={}));var qe;(function(f){function y(R,i){return{items:R||[],isIncomplete:!!i}}f.create=y})(qe=e.CompletionList||(e.CompletionList={}));var Ae;(function(f){function y(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}f.fromPlainText=y;function R(i){var s=i;return w.string(s)||w.objectLiteral(s)&&w.string(s.language)&&w.string(s.value)}f.is=R})(Ae=e.MarkedString||(e.MarkedString={}));var ut;(function(f){function y(R){var i=R;return!!i&&w.objectLiteral(i)&&(_e.is(i.contents)||Ae.is(i.contents)||w.typedArray(i.contents,Ae.is))&&(R.range===void 0||n.is(R.range))}f.is=y})(ut=e.Hover||(e.Hover={}));var lt;(function(f){function y(R,i){return i?{label:R,documentation:i}:{label:R}}f.create=y})(lt=e.ParameterInformation||(e.ParameterInformation={}));var Ze;(function(f){function y(R,i){for(var s=[],p=2;p<arguments.length;p++)s[p-2]=arguments[p];var g={label:R};return w.defined(i)&&(g.documentation=i),w.defined(s)?g.parameters=s:g.parameters=[],g}f.create=y})(Ze=e.SignatureInformation||(e.SignatureInformation={}));var dt;(function(f){f.Text=1,f.Read=2,f.Write=3})(dt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var wt;(function(f){function y(R,i){var s={range:R};return w.number(i)&&(s.kind=i),s}f.create=y})(wt=e.DocumentHighlight||(e.DocumentHighlight={}));var et;(function(f){f.File=1,f.Module=2,f.Namespace=3,f.Package=4,f.Class=5,f.Method=6,f.Property=7,f.Field=8,f.Constructor=9,f.Enum=10,f.Interface=11,f.Function=12,f.Variable=13,f.Constant=14,f.String=15,f.Number=16,f.Boolean=17,f.Array=18,f.Object=19,f.Key=20,f.Null=21,f.EnumMember=22,f.Struct=23,f.Event=24,f.Operator=25,f.TypeParameter=26})(et=e.SymbolKind||(e.SymbolKind={}));var ft;(function(f){f.Deprecated=1})(ft=e.SymbolTag||(e.SymbolTag={}));var Tt;(function(f){function y(R,i,s,p,g){var O={name:R,kind:i,location:{uri:p,range:s}};return g&&(O.containerName=g),O}f.create=y})(Tt=e.SymbolInformation||(e.SymbolInformation={}));var tt;(function(f){function y(i,s,p,g,O,$){var Z={name:i,detail:s,kind:p,range:g,selectionRange:O};return $!==void 0&&(Z.children=$),Z}f.create=y;function R(i){var s=i;return s&&w.string(s.name)&&w.number(s.kind)&&n.is(s.range)&&n.is(s.selectionRange)&&(s.detail===void 0||w.string(s.detail))&&(s.deprecated===void 0||w.boolean(s.deprecated))&&(s.children===void 0||Array.isArray(s.children))}f.is=R})(tt=e.DocumentSymbol||(e.DocumentSymbol={}));var Et;(function(f){f.Empty="",f.QuickFix="quickfix",f.Refactor="refactor",f.RefactorExtract="refactor.extract",f.RefactorInline="refactor.inline",f.RefactorRewrite="refactor.rewrite",f.Source="source",f.SourceOrganizeImports="source.organizeImports",f.SourceFixAll="source.fixAll"})(Et=e.CodeActionKind||(e.CodeActionKind={}));var rt;(function(f){function y(i,s){var p={diagnostics:i};return s!=null&&(p.only=s),p}f.create=y;function R(i){var s=i;return w.defined(s)&&w.typedArray(s.diagnostics,A.is)&&(s.only===void 0||w.typedArray(s.only,w.string))}f.is=R})(rt=e.CodeActionContext||(e.CodeActionContext={}));var Ee;(function(f){function y(i,s,p){var g={title:i};return M.is(s)?g.command=s:g.edit=s,p!==void 0&&(g.kind=p),g}f.create=y;function R(i){var s=i;return s&&w.string(s.title)&&(s.diagnostics===void 0||w.typedArray(s.diagnostics,A.is))&&(s.kind===void 0||w.string(s.kind))&&(s.edit!==void 0||s.command!==void 0)&&(s.command===void 0||M.is(s.command))&&(s.isPreferred===void 0||w.boolean(s.isPreferred))&&(s.edit===void 0||Ie.is(s.edit))}f.is=R})(Ee=e.CodeAction||(e.CodeAction={}));var Pt;(function(f){function y(i,s){var p={range:i};return w.defined(s)&&(p.data=s),p}f.create=y;function R(i){var s=i;return w.defined(s)&&n.is(s.range)&&(w.undefined(s.command)||M.is(s.command))}f.is=R})(Pt=e.CodeLens||(e.CodeLens={}));var Pe;(function(f){function y(i,s){return{tabSize:i,insertSpaces:s}}f.create=y;function R(i){var s=i;return w.defined(s)&&w.number(s.tabSize)&&w.boolean(s.insertSpaces)}f.is=R})(Pe=e.FormattingOptions||(e.FormattingOptions={}));var nt;(function(f){function y(i,s,p){return{range:i,target:s,data:p}}f.create=y;function R(i){var s=i;return w.defined(s)&&n.is(s.range)&&(w.undefined(s.target)||w.string(s.target))}f.is=R})(nt=e.DocumentLink||(e.DocumentLink={}));var De;(function(f){function y(i,s){return{range:i,parent:s}}f.create=y;function R(i){var s=i;return s!==void 0&&n.is(s.range)&&(s.parent===void 0||f.is(s.parent))}f.is=R})(De=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var He;(function(f){function y(p,g,O,$){return new ht(p,g,O,$)}f.create=y;function R(p){var g=p;return!!(w.defined(g)&&w.string(g.uri)&&(w.undefined(g.languageId)||w.string(g.languageId))&&w.number(g.lineCount)&&w.func(g.getText)&&w.func(g.positionAt)&&w.func(g.offsetAt))}f.is=R;function i(p,g){for(var O=p.getText(),$=s(g,function(E,b){var ue=E.range.start.line-b.range.start.line;return ue===0?E.range.start.character-b.range.start.character:ue}),Z=O.length,j=$.length-1;j>=0;j--){var U=$[j],ce=p.offsetAt(U.range.start),c=p.offsetAt(U.range.end);if(c<=Z)O=O.substring(0,ce)+U.newText+O.substring(c,O.length);else throw new Error("Overlapping edit");Z=ce}return O}f.applyEdits=i;function s(p,g){if(p.length<=1)return p;var O=p.length/2|0,$=p.slice(0,O),Z=p.slice(O);s($,g),s(Z,g);for(var j=0,U=0,ce=0;j<$.length&&U<Z.length;){var c=g($[j],Z[U]);c<=0?p[ce++]=$[j++]:p[ce++]=Z[U++]}for(;j<$.length;)p[ce++]=$[j++];for(;U<Z.length;)p[ce++]=Z[U++];return p}})(He=e.TextDocument||(e.TextDocument={}));var ht=function(){function f(y,R,i,s){this._uri=y,this._languageId=R,this._version=i,this._content=s,this._lineOffsets=void 0}return Object.defineProperty(f.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),f.prototype.getText=function(y){if(y){var R=this.offsetAt(y.start),i=this.offsetAt(y.end);return this._content.substring(R,i)}return this._content},f.prototype.update=function(y,R){this._content=y.text,this._version=R,this._lineOffsets=void 0},f.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var y=[],R=this._content,i=!0,s=0;s<R.length;s++){i&&(y.push(s),i=!1);var p=R.charAt(s);i=p==="\r"||p===`
`,p==="\r"&&s+1<R.length&&R.charAt(s+1)===`
`&&s++}i&&R.length>0&&y.push(R.length),this._lineOffsets=y}return this._lineOffsets},f.prototype.positionAt=function(y){y=Math.max(Math.min(y,this._content.length),0);var R=this.getLineOffsets(),i=0,s=R.length;if(s===0)return r.create(0,y);for(;i<s;){var p=Math.floor((i+s)/2);R[p]>y?s=p:i=p+1}var g=i-1;return r.create(g,y-R[g])},f.prototype.offsetAt=function(y){var R=this.getLineOffsets();if(y.line>=R.length)return this._content.length;if(y.line<0)return 0;var i=R[y.line],s=y.line+1<R.length?R[y.line+1]:this._content.length;return Math.max(Math.min(i+y.character,s),i)},Object.defineProperty(f.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),f}(),w;(function(f){var y=Object.prototype.toString;function R(j){return typeof j<"u"}f.defined=R;function i(j){return typeof j>"u"}f.undefined=i;function s(j){return j===!0||j===!1}f.boolean=s;function p(j){return y.call(j)==="[object String]"}f.string=p;function g(j){return y.call(j)==="[object Number]"}f.number=g;function O(j){return y.call(j)==="[object Function]"}f.func=O;function $(j){return j!==null&&typeof j=="object"}f.objectLiteral=$;function Z(j,U){return Array.isArray(j)&&j.every(U)}f.typedArray=Z})(w||(w={}))})});var ns=W(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});function Sc(t){return t===!0||t===!1}ze.boolean=Sc;function ts(t){return typeof t=="string"||t instanceof String}ze.string=ts;function Dc(t){return typeof t=="number"||t instanceof Number}ze.number=Dc;function bc(t){return t instanceof Error}ze.error=bc;function Oc(t){return typeof t=="function"}ze.func=Oc;function rs(t){return Array.isArray(t)}ze.array=rs;function qc(t){return rs(t)&&t.every(e=>ts(e))}ze.stringArray=qc;function kc(t,e){return Array.isArray(t)&&t.every(e)}ze.typedArray=kc;function xc(t){return t!==null&&typeof t=="object"}ze.objectLiteral=xc});var ke=W(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});var Sr=Ke(),is=class extends Sr.RequestType0{constructor(e){super(e)}};jt.ProtocolRequestType0=is;var ss=class extends Sr.RequestType{constructor(e){super(e)}};jt.ProtocolRequestType=ss;var os=class extends Sr.NotificationType{constructor(e){super(e)}};jt.ProtocolNotificationType=os;var as=class extends Sr.NotificationType0{constructor(e){super(e)}};jt.ProtocolNotificationType0=as});var cs=W(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});var Ic=Ke(),Nc=ke(),Fc;(function(t){t.method="textDocument/implementation",t.type=new Nc.ProtocolRequestType(t.method),t.resultType=new Ic.ProgressType})(Fc=Dr.ImplementationRequest||(Dr.ImplementationRequest={}))});var us=W(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var Lc=Ke(),Mc=ke(),Ac;(function(t){t.method="textDocument/typeDefinition",t.type=new Mc.ProtocolRequestType(t.method),t.resultType=new Lc.ProgressType})(Ac=br.TypeDefinitionRequest||(br.TypeDefinitionRequest={}))});var ds=W(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});var ls=ke(),Hc;(function(t){t.type=new ls.ProtocolRequestType0("workspace/workspaceFolders")})(Hc=Wt.WorkspaceFoldersRequest||(Wt.WorkspaceFoldersRequest={}));var jc;(function(t){t.type=new ls.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(jc=Wt.DidChangeWorkspaceFoldersNotification||(Wt.DidChangeWorkspaceFoldersNotification={}))});var fs=W(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var Wc=ke(),Kc;(function(t){t.type=new Wc.ProtocolRequestType("workspace/configuration")})(Kc=Or.ConfigurationRequest||(Or.ConfigurationRequest={}))});var ps=W(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});var zc=Ke(),hs=ke(),$c;(function(t){t.method="textDocument/documentColor",t.type=new hs.ProtocolRequestType(t.method),t.resultType=new zc.ProgressType})($c=Kt.DocumentColorRequest||(Kt.DocumentColorRequest={}));var Uc;(function(t){t.type=new hs.ProtocolRequestType("textDocument/colorPresentation")})(Uc=Kt.ColorPresentationRequest||(Kt.ColorPresentationRequest={}))});var gs=W(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var Gc=Ke(),Xc=ke(),Bc;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Bc=zt.FoldingRangeKind||(zt.FoldingRangeKind={}));var Jc;(function(t){t.method="textDocument/foldingRange",t.type=new Xc.ProtocolRequestType(t.method),t.resultType=new Gc.ProgressType})(Jc=zt.FoldingRangeRequest||(zt.FoldingRangeRequest={}))});var ms=W(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});var Vc=Ke(),Qc=ke(),Yc;(function(t){t.method="textDocument/declaration",t.type=new Qc.ProtocolRequestType(t.method),t.resultType=new Vc.ProgressType})(Yc=qr.DeclarationRequest||(qr.DeclarationRequest={}))});var vs=W(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});var Zc=Ke(),eu=ke(),tu;(function(t){t.method="textDocument/selectionRange",t.type=new eu.ProtocolRequestType(t.method),t.resultType=new Zc.ProgressType})(tu=kr.SelectionRangeRequest||(kr.SelectionRangeRequest={}))});var Cs=W(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var ru=Ke(),ys=ke(),nu;(function(t){t.type=new ru.ProgressType})(nu=yt.WorkDoneProgress||(yt.WorkDoneProgress={}));var iu;(function(t){t.type=new ys.ProtocolRequestType("window/workDoneProgress/create")})(iu=yt.WorkDoneProgressCreateRequest||(yt.WorkDoneProgressCreateRequest={}));var su;(function(t){t.type=new ys.ProtocolNotificationType("window/workDoneProgress/cancel")})(su=yt.WorkDoneProgressCancelNotification||(yt.WorkDoneProgressCancelNotification={}))});var Es=W(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var Ct=ns(),ot=Ke(),X=ke(),ou=cs();T.ImplementationRequest=ou.ImplementationRequest;var au=us();T.TypeDefinitionRequest=au.TypeDefinitionRequest;var Rs=ds();T.WorkspaceFoldersRequest=Rs.WorkspaceFoldersRequest;T.DidChangeWorkspaceFoldersNotification=Rs.DidChangeWorkspaceFoldersNotification;var cu=fs();T.ConfigurationRequest=cu.ConfigurationRequest;var _s=ps();T.DocumentColorRequest=_s.DocumentColorRequest;T.ColorPresentationRequest=_s.ColorPresentationRequest;var uu=gs();T.FoldingRangeRequest=uu.FoldingRangeRequest;var lu=ms();T.DeclarationRequest=lu.DeclarationRequest;var du=vs();T.SelectionRangeRequest=du.SelectionRangeRequest;var tn=Cs();T.WorkDoneProgress=tn.WorkDoneProgress;T.WorkDoneProgressCreateRequest=tn.WorkDoneProgressCreateRequest;T.WorkDoneProgressCancelNotification=tn.WorkDoneProgressCancelNotification;var ws;(function(t){function e(r){let n=r;return Ct.string(n.language)||Ct.string(n.scheme)||Ct.string(n.pattern)}t.is=e})(ws=T.DocumentFilter||(T.DocumentFilter={}));var Ts;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Ct.string(n)&&!ws.is(n))return!1;return!0}t.is=e})(Ts=T.DocumentSelector||(T.DocumentSelector={}));var fu;(function(t){t.type=new X.ProtocolRequestType("client/registerCapability")})(fu=T.RegistrationRequest||(T.RegistrationRequest={}));var hu;(function(t){t.type=new X.ProtocolRequestType("client/unregisterCapability")})(hu=T.UnregistrationRequest||(T.UnregistrationRequest={}));var pu;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(pu=T.ResourceOperationKind||(T.ResourceOperationKind={}));var gu;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(gu=T.FailureHandlingKind||(T.FailureHandlingKind={}));var mu;(function(t){function e(r){let n=r;return n&&Ct.string(n.id)&&n.id.length>0}t.hasId=e})(mu=T.StaticRegistrationOptions||(T.StaticRegistrationOptions={}));var vu;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Ts.is(n.documentSelector))}t.is=e})(vu=T.TextDocumentRegistrationOptions||(T.TextDocumentRegistrationOptions={}));var yu;(function(t){function e(n){let o=n;return Ct.objectLiteral(o)&&(o.workDoneProgress===void 0||Ct.boolean(o.workDoneProgress))}t.is=e;function r(n){let o=n;return o&&Ct.boolean(o.workDoneProgress)}t.hasWorkDoneProgress=r})(yu=T.WorkDoneProgressOptions||(T.WorkDoneProgressOptions={}));var Cu;(function(t){t.type=new X.ProtocolRequestType("initialize")})(Cu=T.InitializeRequest||(T.InitializeRequest={}));var Ru;(function(t){t.unknownProtocolVersion=1})(Ru=T.InitializeError||(T.InitializeError={}));var _u;(function(t){t.type=new X.ProtocolNotificationType("initialized")})(_u=T.InitializedNotification||(T.InitializedNotification={}));var wu;(function(t){t.type=new X.ProtocolRequestType0("shutdown")})(wu=T.ShutdownRequest||(T.ShutdownRequest={}));var Tu;(function(t){t.type=new X.ProtocolNotificationType0("exit")})(Tu=T.ExitNotification||(T.ExitNotification={}));var Eu;(function(t){t.type=new X.ProtocolNotificationType("workspace/didChangeConfiguration")})(Eu=T.DidChangeConfigurationNotification||(T.DidChangeConfigurationNotification={}));var Pu;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Pu=T.MessageType||(T.MessageType={}));var Su;(function(t){t.type=new X.ProtocolNotificationType("window/showMessage")})(Su=T.ShowMessageNotification||(T.ShowMessageNotification={}));var Du;(function(t){t.type=new X.ProtocolRequestType("window/showMessageRequest")})(Du=T.ShowMessageRequest||(T.ShowMessageRequest={}));var bu;(function(t){t.type=new X.ProtocolNotificationType("window/logMessage")})(bu=T.LogMessageNotification||(T.LogMessageNotification={}));var Ou;(function(t){t.type=new X.ProtocolNotificationType("telemetry/event")})(Ou=T.TelemetryEventNotification||(T.TelemetryEventNotification={}));var qu;(function(t){t.None=0,t.Full=1,t.Incremental=2})(qu=T.TextDocumentSyncKind||(T.TextDocumentSyncKind={}));var ku;(function(t){t.method="textDocument/didOpen",t.type=new X.ProtocolNotificationType(t.method)})(ku=T.DidOpenTextDocumentNotification||(T.DidOpenTextDocumentNotification={}));var xu;(function(t){t.method="textDocument/didChange",t.type=new X.ProtocolNotificationType(t.method)})(xu=T.DidChangeTextDocumentNotification||(T.DidChangeTextDocumentNotification={}));var Iu;(function(t){t.method="textDocument/didClose",t.type=new X.ProtocolNotificationType(t.method)})(Iu=T.DidCloseTextDocumentNotification||(T.DidCloseTextDocumentNotification={}));var Nu;(function(t){t.method="textDocument/didSave",t.type=new X.ProtocolNotificationType(t.method)})(Nu=T.DidSaveTextDocumentNotification||(T.DidSaveTextDocumentNotification={}));var Fu;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Fu=T.TextDocumentSaveReason||(T.TextDocumentSaveReason={}));var Lu;(function(t){t.method="textDocument/willSave",t.type=new X.ProtocolNotificationType(t.method)})(Lu=T.WillSaveTextDocumentNotification||(T.WillSaveTextDocumentNotification={}));var Mu;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new X.ProtocolRequestType(t.method)})(Mu=T.WillSaveTextDocumentWaitUntilRequest||(T.WillSaveTextDocumentWaitUntilRequest={}));var Au;(function(t){t.type=new X.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Au=T.DidChangeWatchedFilesNotification||(T.DidChangeWatchedFilesNotification={}));var Hu;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Hu=T.FileChangeType||(T.FileChangeType={}));var ju;(function(t){t.Create=1,t.Change=2,t.Delete=4})(ju=T.WatchKind||(T.WatchKind={}));var Wu;(function(t){t.type=new X.ProtocolNotificationType("textDocument/publishDiagnostics")})(Wu=T.PublishDiagnosticsNotification||(T.PublishDiagnosticsNotification={}));var Ku;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Ku=T.CompletionTriggerKind||(T.CompletionTriggerKind={}));var zu;(function(t){t.method="textDocument/completion",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(zu=T.CompletionRequest||(T.CompletionRequest={}));var $u;(function(t){t.method="completionItem/resolve",t.type=new X.ProtocolRequestType(t.method)})($u=T.CompletionResolveRequest||(T.CompletionResolveRequest={}));var Uu;(function(t){t.method="textDocument/hover",t.type=new X.ProtocolRequestType(t.method)})(Uu=T.HoverRequest||(T.HoverRequest={}));var Gu;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Gu=T.SignatureHelpTriggerKind||(T.SignatureHelpTriggerKind={}));var Xu;(function(t){t.method="textDocument/signatureHelp",t.type=new X.ProtocolRequestType(t.method)})(Xu=T.SignatureHelpRequest||(T.SignatureHelpRequest={}));var Bu;(function(t){t.method="textDocument/definition",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Bu=T.DefinitionRequest||(T.DefinitionRequest={}));var Ju;(function(t){t.method="textDocument/references",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Ju=T.ReferencesRequest||(T.ReferencesRequest={}));var Vu;(function(t){t.method="textDocument/documentHighlight",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Vu=T.DocumentHighlightRequest||(T.DocumentHighlightRequest={}));var Qu;(function(t){t.method="textDocument/documentSymbol",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Qu=T.DocumentSymbolRequest||(T.DocumentSymbolRequest={}));var Yu;(function(t){t.method="textDocument/codeAction",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Yu=T.CodeActionRequest||(T.CodeActionRequest={}));var Zu;(function(t){t.method="workspace/symbol",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(Zu=T.WorkspaceSymbolRequest||(T.WorkspaceSymbolRequest={}));var el;(function(t){t.type=new X.ProtocolRequestType("textDocument/codeLens"),t.resultType=new ot.ProgressType})(el=T.CodeLensRequest||(T.CodeLensRequest={}));var tl;(function(t){t.type=new X.ProtocolRequestType("codeLens/resolve")})(tl=T.CodeLensResolveRequest||(T.CodeLensResolveRequest={}));var rl;(function(t){t.method="textDocument/documentLink",t.type=new X.ProtocolRequestType(t.method),t.resultType=new ot.ProgressType})(rl=T.DocumentLinkRequest||(T.DocumentLinkRequest={}));var nl;(function(t){t.type=new X.ProtocolRequestType("documentLink/resolve")})(nl=T.DocumentLinkResolveRequest||(T.DocumentLinkResolveRequest={}));var il;(function(t){t.method="textDocument/formatting",t.type=new X.ProtocolRequestType(t.method)})(il=T.DocumentFormattingRequest||(T.DocumentFormattingRequest={}));var sl;(function(t){t.method="textDocument/rangeFormatting",t.type=new X.ProtocolRequestType(t.method)})(sl=T.DocumentRangeFormattingRequest||(T.DocumentRangeFormattingRequest={}));var ol;(function(t){t.method="textDocument/onTypeFormatting",t.type=new X.ProtocolRequestType(t.method)})(ol=T.DocumentOnTypeFormattingRequest||(T.DocumentOnTypeFormattingRequest={}));var al;(function(t){t.method="textDocument/rename",t.type=new X.ProtocolRequestType(t.method)})(al=T.RenameRequest||(T.RenameRequest={}));var cl;(function(t){t.method="textDocument/prepareRename",t.type=new X.ProtocolRequestType(t.method)})(cl=T.PrepareRenameRequest||(T.PrepareRenameRequest={}));var ul;(function(t){t.type=new X.ProtocolRequestType("workspace/executeCommand")})(ul=T.ExecuteCommandRequest||(T.ExecuteCommandRequest={}));var ll;(function(t){t.type=new X.ProtocolRequestType("workspace/applyEdit")})(ll=T.ApplyWorkspaceEditRequest||(T.ApplyWorkspaceEditRequest={}))});var Ps=W(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var rn=ke(),dl;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new rn.ProtocolRequestType(t.method)})(dl=Rt.CallHierarchyPrepareRequest||(Rt.CallHierarchyPrepareRequest={}));var fl;(function(t){t.method="callHierarchy/incomingCalls",t.type=new rn.ProtocolRequestType(t.method)})(fl=Rt.CallHierarchyIncomingCallsRequest||(Rt.CallHierarchyIncomingCallsRequest={}));var hl;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new rn.ProtocolRequestType(t.method)})(hl=Rt.CallHierarchyOutgoingCallsRequest||(Rt.CallHierarchyOutgoingCallsRequest={}))});var Ss=W(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var nn=ke(),pl;(function(t){t.comment="comment",t.keyword="keyword",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.namespace="namespace",t.type="type",t.struct="struct",t.class="class",t.interface="interface",t.enum="enum",t.typeParameter="typeParameter",t.function="function",t.member="member",t.property="property",t.macro="macro",t.variable="variable",t.parameter="parameter",t.label="label"})(pl=be.SemanticTokenTypes||(be.SemanticTokenTypes={}));var gl;(function(t){t.documentation="documentation",t.declaration="declaration",t.definition="definition",t.reference="reference",t.static="static",t.abstract="abstract",t.deprecated="deprecated",t.async="async",t.volatile="volatile",t.readonly="readonly"})(gl=be.SemanticTokenModifiers||(be.SemanticTokenModifiers={}));var ml;(function(t){function e(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(ml=be.SemanticTokens||(be.SemanticTokens={}));var vl;(function(t){t.method="textDocument/semanticTokens",t.type=new nn.ProtocolRequestType(t.method)})(vl=be.SemanticTokensRequest||(be.SemanticTokensRequest={}));var yl;(function(t){t.method="textDocument/semanticTokens/edits",t.type=new nn.ProtocolRequestType(t.method)})(yl=be.SemanticTokensEditsRequest||(be.SemanticTokensEditsRequest={}));var Cl;(function(t){t.method="textDocument/semanticTokens/range",t.type=new nn.ProtocolRequestType(t.method)})(Cl=be.SemanticTokensRangeRequest||(be.SemanticTokensRangeRequest={}))});var me=W(Y=>{"use strict";function Ds(t){for(var e in t)Y.hasOwnProperty(e)||(Y[e]=t[e])}Object.defineProperty(Y,"__esModule",{value:!0});var ie=Ke();Y.ErrorCodes=ie.ErrorCodes;Y.ResponseError=ie.ResponseError;Y.CancellationToken=ie.CancellationToken;Y.CancellationTokenSource=ie.CancellationTokenSource;Y.Disposable=ie.Disposable;Y.Event=ie.Event;Y.Emitter=ie.Emitter;Y.Trace=ie.Trace;Y.TraceFormat=ie.TraceFormat;Y.SetTraceNotification=ie.SetTraceNotification;Y.LogTraceNotification=ie.LogTraceNotification;Y.RequestType=ie.RequestType;Y.RequestType0=ie.RequestType0;Y.NotificationType=ie.NotificationType;Y.NotificationType0=ie.NotificationType0;Y.MessageReader=ie.MessageReader;Y.MessageWriter=ie.MessageWriter;Y.ConnectionStrategy=ie.ConnectionStrategy;Y.StreamMessageReader=ie.StreamMessageReader;Y.StreamMessageWriter=ie.StreamMessageWriter;Y.IPCMessageReader=ie.IPCMessageReader;Y.IPCMessageWriter=ie.IPCMessageWriter;Y.createClientPipeTransport=ie.createClientPipeTransport;Y.createServerPipeTransport=ie.createServerPipeTransport;Y.generateRandomPipeName=ie.generateRandomPipeName;Y.createClientSocketTransport=ie.createClientSocketTransport;Y.createServerSocketTransport=ie.createServerSocketTransport;Y.ProgressType=ie.ProgressType;Ds(es());Ds(Es());var $t=Ps(),at=Ss(),Rl;(function(t){let e;(function(l){l.method=$t.CallHierarchyPrepareRequest.method,l.type=$t.CallHierarchyPrepareRequest.type})(e=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={}));let r;(function(l){l.method=$t.CallHierarchyIncomingCallsRequest.method,l.type=$t.CallHierarchyIncomingCallsRequest.type})(r=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={}));let n;(function(l){l.method=$t.CallHierarchyOutgoingCallsRequest.method,l.type=$t.CallHierarchyOutgoingCallsRequest.type})(n=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})),t.SemanticTokenTypes=at.SemanticTokenTypes,t.SemanticTokenModifiers=at.SemanticTokenModifiers,t.SemanticTokens=at.SemanticTokens;let o;(function(l){l.method=at.SemanticTokensRequest.method,l.type=at.SemanticTokensRequest.type})(o=t.SemanticTokensRequest||(t.SemanticTokensRequest={}));let a;(function(l){l.method=at.SemanticTokensEditsRequest.method,l.type=at.SemanticTokensEditsRequest.type})(a=t.SemanticTokensEditsRequest||(t.SemanticTokensEditsRequest={}));let u;(function(l){l.method=at.SemanticTokensRangeRequest.method,l.type=at.SemanticTokensRangeRequest.type})(u=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))})(Rl=Y.Proposed||(Y.Proposed={}));function _l(t,e,r,n){return ie.createMessageConnection(t,e,r,n)}Y.createProtocolConnection=_l});var Ut=W(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});function wl(t){return t===!0||t===!1}Le.boolean=wl;function bs(t){return typeof t=="string"||t instanceof String}Le.string=bs;function Tl(t){return typeof t=="number"||t instanceof Number}Le.number=Tl;function El(t){return t instanceof Error}Le.error=El;function Os(t){return typeof t=="function"}Le.func=Os;function qs(t){return Array.isArray(t)}Le.array=qs;function Pl(t){return qs(t)&&t.every(e=>bs(e))}Le.stringArray=Pl;function Sl(t,e){return Array.isArray(t)&&t.every(e)}Le.typedArray=Sl;function ks(t){return t&&Os(t.then)}Le.thenable=ks;function Dl(t){return t instanceof Promise?t:ks(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}Le.asPromise=Dl});var on=W(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var bl=require("vscode"),xs=class extends bl.CompletionItem{constructor(e){super(e)}};sn.default=xs});var cn=W(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var Ol=require("vscode"),Is=class extends Ol.CodeLens{constructor(e){super(e)}};an.default=Is});var ln=W(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var ql=require("vscode"),Ns=class extends ql.DocumentLink{constructor(e,r){super(e,r)}};un.default=Ns});var Fs=W(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var ve=require("vscode"),se=me(),ar=Ut(),kl=on(),xl=cn(),Il=ln();function Nl(t){let r=t||(i=>i.toString());function n(i){return r(i)}function o(i){return{uri:r(i.uri)}}function a(i){return{uri:r(i.uri),version:i.version}}function u(i){return{textDocument:{uri:r(i.uri),languageId:i.languageId,version:i.version,text:i.getText()}}}function l(i){let s=i;return!!s.document&&!!s.contentChanges}function d(i){let s=i;return!!s.uri&&!!s.version}function m(i){if(d(i))return{textDocument:{uri:r(i.uri),version:i.version},contentChanges:[{text:i.getText()}]};if(l(i)){let s=i.document;return{textDocument:{uri:r(s.uri),version:s.version},contentChanges:i.contentChanges.map(g=>{let O=g.range;return{range:{start:{line:O.start.line,character:O.start.character},end:{line:O.end.line,character:O.end.character}},rangeLength:g.rangeLength,text:g.text}})}}else throw Error("Unsupported text document change parameter")}function C(i){return{textDocument:o(i)}}function v(i,s=!1){let p={textDocument:a(i)};return s&&(p.text=i.getText()),p}function P(i){switch(i){case ve.TextDocumentSaveReason.Manual:return se.TextDocumentSaveReason.Manual;case ve.TextDocumentSaveReason.AfterDelay:return se.TextDocumentSaveReason.AfterDelay;case ve.TextDocumentSaveReason.FocusOut:return se.TextDocumentSaveReason.FocusOut}return se.TextDocumentSaveReason.Manual}function D(i){return{textDocument:o(i.document),reason:P(i.reason)}}function A(i,s){return{textDocument:o(i),position:Re(s)}}function M(i){switch(i){case ve.CompletionTriggerKind.TriggerCharacter:return se.CompletionTriggerKind.TriggerCharacter;case ve.CompletionTriggerKind.TriggerForIncompleteCompletions:return se.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return se.CompletionTriggerKind.Invoked}}function K(i,s,p){return{textDocument:o(i),position:Re(s),context:{triggerKind:M(p.triggerKind),triggerCharacter:p.triggerCharacter}}}function k(i){switch(i){case ve.SignatureHelpTriggerKind.Invoke:return se.SignatureHelpTriggerKind.Invoked;case ve.SignatureHelpTriggerKind.TriggerCharacter:return se.SignatureHelpTriggerKind.TriggerCharacter;case ve.SignatureHelpTriggerKind.ContentChange:return se.SignatureHelpTriggerKind.ContentChange}}function F(i){return{label:i.label}}function q(i){return i.map(F)}function J(i){return{label:i.label,parameters:q(i.parameters)}}function Ie(i){return i.map(J)}function Me(i){return i===void 0?i:{signatures:Ie(i.signatures),activeSignature:i.activeSignature,activeParameter:i.activeParameter}}function Ue(i,s,p){return{textDocument:o(i),position:Re(s),context:{isRetrigger:p.isRetrigger,triggerCharacter:p.triggerCharacter,triggerKind:k(p.triggerKind),activeSignatureHelp:Me(p.activeSignatureHelp)}}}function Re(i){return{line:i.line,character:i.character}}function Oe(i){return i==null?i:{line:i.line,character:i.character}}function Ve(i){let s=[];for(let p of i)s.push(Oe(p));return s}function Ge(i){let s=i;return s&&!!s.inserting&&!!s.replacing}function _e(i){if(i==null)return i;if(Ge(i))throw new Error("Receving unknown insert replace range.");return{start:Oe(i.start),end:Oe(i.end)}}function Qe(i){return i==null?i:se.Location.create(n(i.uri),_e(i.range))}function Ne(i){switch(i){case ve.DiagnosticSeverity.Error:return se.DiagnosticSeverity.Error;case ve.DiagnosticSeverity.Warning:return se.DiagnosticSeverity.Warning;case ve.DiagnosticSeverity.Information:return se.DiagnosticSeverity.Information;case ve.DiagnosticSeverity.Hint:return se.DiagnosticSeverity.Hint}}function ct(i){if(!i)return;let s=[];for(let p of i){let g=Ye(p);g!==void 0&&s.push(g)}return s.length>0?s:void 0}function Ye(i){switch(i){case ve.DiagnosticTag.Unnecessary:return se.DiagnosticTag.Unnecessary;case ve.DiagnosticTag.Deprecated:return se.DiagnosticTag.Deprecated;default:return}}function qe(i){return{message:i.message,location:Qe(i.location)}}function Ae(i){return i.map(qe)}function ut(i){let s=se.Diagnostic.create(_e(i.range),i.message);return ar.number(i.severity)&&(s.severity=Ne(i.severity)),(ar.number(i.code)||ar.string(i.code))&&(s.code=i.code),Array.isArray(i.tags)&&(s.tags=ct(i.tags)),i.relatedInformation&&(s.relatedInformation=Ae(i.relatedInformation)),i.source&&(s.source=i.source),s}function lt(i){return i==null?i:i.map(ut)}function Ze(i,s){switch(i){case"$string":return s;case se.MarkupKind.PlainText:return{kind:i,value:s};case se.MarkupKind.Markdown:return{kind:i,value:s.value};default:return`Unsupported Markup content received. Kind is: ${i}`}}function dt(i){switch(i){case ve.CompletionItemTag.Deprecated:return se.CompletionItemTag.Deprecated}}function wt(i){if(i===void 0)return i;let s=[];for(let p of i){let g=dt(p);g!==void 0&&s.push(g)}return s}function et(i,s){return s!==void 0?s:i+1}function ft(i){let s={label:i.label},p=i instanceof kl.default?i:void 0;i.detail&&(s.detail=i.detail),i.documentation&&(!p||p.documentationFormat==="$string"?s.documentation=i.documentation:s.documentation=Ze(p.documentationFormat,i.documentation)),i.filterText&&(s.filterText=i.filterText),Tt(s,i),ar.number(i.kind)&&(s.kind=et(i.kind,p&&p.originalItemKind)),i.sortText&&(s.sortText=i.sortText),i.additionalTextEdits&&(s.additionalTextEdits=Et(i.additionalTextEdits)),i.commitCharacters&&(s.commitCharacters=i.commitCharacters.slice()),i.command&&(s.command=De(i.command)),(i.preselect===!0||i.preselect===!1)&&(s.preselect=i.preselect);let g=wt(i.tags);if(p&&(p.data!==void 0&&(s.data=p.data),p.deprecated===!0||p.deprecated===!1)){if(p.deprecated===!0&&g!==void 0&&g.length>0){let O=g.indexOf(ve.CompletionItemTag.Deprecated);O!==-1&&g.splice(O,1)}s.deprecated=p.deprecated}return g!==void 0&&g.length>0&&(s.tags=g),s}function Tt(i,s){let p=se.InsertTextFormat.PlainText,g,O;s.textEdit?(g=s.textEdit.newText,O=_e(s.textEdit.range)):s.insertText instanceof ve.SnippetString?(p=se.InsertTextFormat.Snippet,g=s.insertText.value):g=s.insertText,s.range&&(O=_e(s.range)),i.insertTextFormat=p,s.fromEdit&&g!==void 0&&O!==void 0?i.textEdit={newText:g,range:O}:i.insertText=g}function tt(i){return{range:_e(i.range),newText:i.newText}}function Et(i){return i==null?i:i.map(tt)}function rt(i){return i<=ve.SymbolKind.TypeParameter?i+1:se.SymbolKind.Property}function Ee(i){return i}function Pt(i){return i.map(Ee)}function Pe(i,s,p){return{textDocument:o(i),position:Re(s),context:{includeDeclaration:p.includeDeclaration}}}function nt(i){if(i==null)return i;let s;return i.only&&ar.string(i.only.value)&&(s=[i.only.value]),se.CodeActionContext.create(lt(i.diagnostics),s)}function De(i){let s=se.Command.create(i.title,i.command);return i.arguments&&(s.arguments=i.arguments),s}function He(i){let s=se.CodeLens.create(_e(i.range));return i.command&&(s.command=De(i.command)),i instanceof xl.default&&i.data&&(s.data=i.data),s}function ht(i){return{tabSize:i.tabSize,insertSpaces:i.insertSpaces}}function w(i){return{textDocument:o(i)}}function f(i){return{textDocument:o(i)}}function y(i){let s=se.DocumentLink.create(_e(i.range));i.target&&(s.target=n(i.target)),i.tooltip!==void 0&&(s.tooltip=i.tooltip);let p=i instanceof Il.default?i:void 0;return p&&p.data&&(s.data=p.data),s}function R(i){return{textDocument:o(i)}}return{asUri:n,asTextDocumentIdentifier:o,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:u,asChangeTextDocumentParams:m,asCloseTextDocumentParams:C,asSaveTextDocumentParams:v,asWillSaveTextDocumentParams:D,asTextDocumentPositionParams:A,asCompletionParams:K,asSignatureHelpParams:Ue,asWorkerPosition:Re,asRange:_e,asPosition:Oe,asPositions:Ve,asLocation:Qe,asDiagnosticSeverity:Ne,asDiagnosticTag:Ye,asDiagnostic:ut,asDiagnostics:lt,asCompletionItem:ft,asTextEdit:tt,asSymbolKind:rt,asSymbolTag:Ee,asSymbolTags:Pt,asReferenceParams:Pe,asCodeActionContext:nt,asCommand:De,asCodeLens:He,asFormattingOptions:ht,asDocumentSymbolParams:w,asCodeLensParams:f,asDocumentLink:y,asDocumentLinkParams:R}}dn.createConverter=Nl});var Ls=W(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var I=require("vscode"),Q=me(),xe=Ut(),Fl=on(),Ll=cn(),Ml=ln(),xr;(function(t){function e(r){let n=r;return n&&xe.string(n.language)&&xe.string(n.value)}t.is=e})(xr||(xr={}));function Al(t){let r=t||(c=>I.Uri.parse(c));function n(c){return r(c)}function o(c){return c.map(a)}function a(c){let E=new I.Diagnostic(v(c.range),c.message,D(c.severity));return(xe.number(c.code)||xe.string(c.code))&&(E.code=c.code),c.source&&(E.source=c.source),c.relatedInformation&&(E.relatedInformation=u(c.relatedInformation)),Array.isArray(c.tags)&&(E.tags=d(c.tags)),E}function u(c){return c.map(l)}function l(c){return new I.DiagnosticRelatedInformation(Ne(c.location),c.message)}function d(c){if(!c)return;let E=[];for(let b of c){let ue=m(b);ue!==void 0&&E.push(ue)}return E.length>0?E:void 0}function m(c){switch(c){case Q.DiagnosticTag.Unnecessary:return I.DiagnosticTag.Unnecessary;case Q.DiagnosticTag.Deprecated:return I.DiagnosticTag.Deprecated;default:return}}function C(c){if(!!c)return new I.Position(c.line,c.character)}function v(c){if(!!c)return new I.Range(C(c.start),C(c.end))}function P(c){return c.map(E=>v(E))}function D(c){if(c==null)return I.DiagnosticSeverity.Error;switch(c){case Q.DiagnosticSeverity.Error:return I.DiagnosticSeverity.Error;case Q.DiagnosticSeverity.Warning:return I.DiagnosticSeverity.Warning;case Q.DiagnosticSeverity.Information:return I.DiagnosticSeverity.Information;case Q.DiagnosticSeverity.Hint:return I.DiagnosticSeverity.Hint}return I.DiagnosticSeverity.Error}function A(c){if(xe.string(c))return new I.MarkdownString(c);if(xr.is(c))return new I.MarkdownString().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let E=[];for(let b of c){let ue=new I.MarkdownString;xr.is(b)?ue.appendCodeblock(b.value,b.language):ue.appendMarkdown(b),E.push(ue)}return E}else{let E;switch(c.kind){case Q.MarkupKind.Markdown:return new I.MarkdownString(c.value);case Q.MarkupKind.PlainText:return E=new I.MarkdownString,E.appendText(c.value),E;default:return E=new I.MarkdownString,E.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`),E}}}function M(c){if(xe.string(c))return c;switch(c.kind){case Q.MarkupKind.Markdown:return new I.MarkdownString(c.value);case Q.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function K(c){if(!!c)return new I.Hover(A(c.contents),v(c.range))}function k(c){if(!c)return;if(Array.isArray(c))return c.map(Ie);let E=c;return new I.CompletionList(E.items.map(Ie),E.isIncomplete)}function F(c){return Q.CompletionItemKind.Text<=c&&c<=Q.CompletionItemKind.TypeParameter?[c-1,void 0]:[I.CompletionItemKind.Text,c]}function q(c){switch(c){case Q.CompletionItemTag.Deprecated:return I.CompletionItemTag.Deprecated}}function J(c){if(c==null)return[];let E=[];for(let b of c){let ue=q(b);ue!==void 0&&E.push(ue)}return E}function Ie(c){let E=J(c.tags),b=new Fl.default(c.label);c.detail&&(b.detail=c.detail),c.documentation&&(b.documentation=M(c.documentation),b.documentationFormat=xe.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(b.filterText=c.filterText);let ue=Me(c);if(ue&&(b.insertText=ue.text,b.range=ue.range,b.fromEdit=ue.fromEdit),xe.number(c.kind)){let[aa,$n]=F(c.kind);b.kind=aa,$n&&(b.originalItemKind=$n)}return c.sortText&&(b.sortText=c.sortText),c.additionalTextEdits&&(b.additionalTextEdits=Re(c.additionalTextEdits)),xe.stringArray(c.commitCharacters)&&(b.commitCharacters=c.commitCharacters.slice()),c.command&&(b.command=Ee(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(b.deprecated=c.deprecated,c.deprecated===!0&&E.push(I.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(b.preselect=c.preselect),c.data!==void 0&&(b.data=c.data),E.length>0&&(b.tags=E),b}function Me(c){return c.textEdit?c.insertTextFormat===Q.InsertTextFormat.Snippet?{text:new I.SnippetString(c.textEdit.newText),range:v(c.textEdit.range),fromEdit:!0}:{text:c.textEdit.newText,range:v(c.textEdit.range),fromEdit:!0}:c.insertText?c.insertTextFormat===Q.InsertTextFormat.Snippet?{text:new I.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function Ue(c){if(!!c)return new I.TextEdit(v(c.range),c.newText)}function Re(c){if(!!c)return c.map(Ue)}function Oe(c){if(!c)return;let E=new I.SignatureHelp;return xe.number(c.activeSignature)?E.activeSignature=c.activeSignature:E.activeSignature=0,xe.number(c.activeParameter)?E.activeParameter=c.activeParameter:E.activeParameter=0,c.signatures&&(E.signatures=Ve(c.signatures)),E}function Ve(c){return c.map(Ge)}function Ge(c){let E=new I.SignatureInformation(c.label);return c.documentation&&(E.documentation=M(c.documentation)),c.parameters&&(E.parameters=_e(c.parameters)),E}function _e(c){return c.map(Qe)}function Qe(c){let E=new I.ParameterInformation(c.label);return c.documentation&&(E.documentation=M(c.documentation)),E}function Ne(c){if(!!c)return new I.Location(r(c.uri),v(c.range))}function ct(c){if(!!c)return Ae(c)}function Ye(c){if(!!c)return Ae(c)}function qe(c){if(!c)return;let E={targetUri:r(c.targetUri),targetRange:v(c.targetSelectionRange),originSelectionRange:v(c.originSelectionRange),targetSelectionRange:v(c.targetSelectionRange)};if(!E.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return E}function Ae(c){if(!!c)return xe.array(c)?c.length===0?[]:Q.LocationLink.is(c[0])?c.map(b=>qe(b)):c.map(b=>Ne(b)):Q.LocationLink.is(c)?[qe(c)]:Ne(c)}function ut(c){if(!!c)return c.map(E=>Ne(E))}function lt(c){if(!!c)return c.map(Ze)}function Ze(c){let E=new I.DocumentHighlight(v(c.range));return xe.number(c.kind)&&(E.kind=dt(c.kind)),E}function dt(c){switch(c){case Q.DocumentHighlightKind.Text:return I.DocumentHighlightKind.Text;case Q.DocumentHighlightKind.Read:return I.DocumentHighlightKind.Read;case Q.DocumentHighlightKind.Write:return I.DocumentHighlightKind.Write}return I.DocumentHighlightKind.Text}function wt(c,E){if(!!c)return c.map(b=>tt(b,E))}function et(c){return c<=Q.SymbolKind.TypeParameter?c-1:I.SymbolKind.Property}function ft(c){return c}function Tt(c){if(c!=null)return c.map(ft)}function tt(c,E){let b=new I.SymbolInformation(c.name,et(c.kind),v(c.location.range),c.location.uri?r(c.location.uri):E);return c.containerName&&(b.containerName=c.containerName),b}function Et(c){if(c!=null)return c.map(rt)}function rt(c){let E=new I.DocumentSymbol(c.name,c.detail||"",et(c.kind),v(c.range),v(c.selectionRange));if(c.children!==void 0&&c.children.length>0){let b=[];for(let ue of c.children)b.push(rt(ue));E.children=b}return E}function Ee(c){let E={title:c.title,command:c.command};return c.arguments&&(E.arguments=c.arguments),E}function Pt(c){if(!!c)return c.map(Ee)}let Pe=new Map;Pe.set(Q.CodeActionKind.Empty,I.CodeActionKind.Empty),Pe.set(Q.CodeActionKind.QuickFix,I.CodeActionKind.QuickFix),Pe.set(Q.CodeActionKind.Refactor,I.CodeActionKind.Refactor),Pe.set(Q.CodeActionKind.RefactorExtract,I.CodeActionKind.RefactorExtract),Pe.set(Q.CodeActionKind.RefactorInline,I.CodeActionKind.RefactorInline),Pe.set(Q.CodeActionKind.RefactorRewrite,I.CodeActionKind.RefactorRewrite),Pe.set(Q.CodeActionKind.Source,I.CodeActionKind.Source),Pe.set(Q.CodeActionKind.SourceOrganizeImports,I.CodeActionKind.SourceOrganizeImports);function nt(c){if(c==null)return;let E=Pe.get(c);if(E)return E;let b=c.split(".");E=I.CodeActionKind.Empty;for(let ue of b)E=E.append(ue);return E}function De(c){if(c!=null)return c.map(E=>nt(E))}function He(c){if(c==null)return;let E=new I.CodeAction(c.title);return c.kind!==void 0&&(E.kind=nt(c.kind)),c.diagnostics&&(E.diagnostics=o(c.diagnostics)),c.edit&&(E.edit=f(c.edit)),c.command&&(E.command=Ee(c.command)),c.isPreferred!==void 0&&(E.isPreferred=c.isPreferred),E}function ht(c){if(!c)return;let E=new Ll.default(v(c.range));return c.command&&(E.command=Ee(c.command)),c.data!==void 0&&c.data!==null&&(E.data=c.data),E}function w(c){if(!!c)return c.map(E=>ht(E))}function f(c){if(!c)return;let E=new I.WorkspaceEdit;return c.documentChanges?c.documentChanges.forEach(b=>{Q.CreateFile.is(b)?E.createFile(r(b.uri),b.options):Q.RenameFile.is(b)?E.renameFile(r(b.oldUri),r(b.newUri),b.options):Q.DeleteFile.is(b)?E.deleteFile(r(b.uri),b.options):Q.TextDocumentEdit.is(b)?E.set(r(b.textDocument.uri),Re(b.edits)):console.error(`Unknown workspace edit change received:
${JSON.stringify(b,void 0,4)}`)}):c.changes&&Object.keys(c.changes).forEach(b=>{E.set(r(b),Re(c.changes[b]))}),E}function y(c){let E=v(c.range),b=c.target?n(c.target):void 0,ue=new Ml.default(E,b);return c.tooltip!==void 0&&(ue.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(ue.data=c.data),ue}function R(c){if(!!c)return c.map(y)}function i(c){return new I.Color(c.red,c.green,c.blue,c.alpha)}function s(c){return new I.ColorInformation(v(c.range),i(c.color))}function p(c){if(Array.isArray(c))return c.map(s)}function g(c){let E=new I.ColorPresentation(c.label);return E.additionalTextEdits=Re(c.additionalTextEdits),c.textEdit&&(E.textEdit=Ue(c.textEdit)),E}function O(c){if(Array.isArray(c))return c.map(g)}function $(c){if(c)switch(c){case Q.FoldingRangeKind.Comment:return I.FoldingRangeKind.Comment;case Q.FoldingRangeKind.Imports:return I.FoldingRangeKind.Imports;case Q.FoldingRangeKind.Region:return I.FoldingRangeKind.Region}}function Z(c){return new I.FoldingRange(c.startLine,c.endLine,$(c.kind))}function j(c){if(Array.isArray(c))return c.map(Z)}function U(c){return new I.SelectionRange(v(c.range),c.parent?U(c.parent):void 0)}function ce(c){if(!Array.isArray(c))return[];let E=[];for(let b of c)E.push(U(b));return E}return{asUri:n,asDiagnostics:o,asDiagnostic:a,asRange:v,asRanges:P,asPosition:C,asDiagnosticSeverity:D,asDiagnosticTag:m,asHover:K,asCompletionResult:k,asCompletionItem:Ie,asTextEdit:Ue,asTextEdits:Re,asSignatureHelp:Oe,asSignatureInformations:Ve,asSignatureInformation:Ge,asParameterInformations:_e,asParameterInformation:Qe,asDeclarationResult:ct,asDefinitionResult:Ye,asLocation:Ne,asReferences:ut,asDocumentHighlights:lt,asDocumentHighlight:Ze,asDocumentHighlightKind:dt,asSymbolKind:et,asSymbolTag:ft,asSymbolTags:Tt,asSymbolInformations:wt,asSymbolInformation:tt,asDocumentSymbols:Et,asDocumentSymbol:rt,asCommand:Ee,asCommands:Pt,asCodeAction:He,asCodeActionKind:nt,asCodeActionKinds:De,asCodeLens:ht,asCodeLenses:w,asWorkspaceEdit:f,asDocumentLink:y,asDocumentLinks:R,asFoldingRangeKind:$,asFoldingRange:Z,asFoldingRanges:j,asColor:i,asColorInformation:s,asColorInformations:p,asColorPresentation:g,asColorPresentations:O,asSelectionRange:U,asSelectionRanges:ce}}fn.createConverter=Al});var As=W(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Ms=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}};hn.Delayer=Ms});var pn=W(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var Ir=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},B=class extends Ir{constructor(){super([B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),"-","4",B._randomHex(),B._randomHex(),B._randomHex(),"-",B._oneOf(B._timeHighBits),B._randomHex(),B._randomHex(),B._randomHex(),"-",B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex(),B._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return B._oneOf(B._chars)}};B._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];B._timeHighBits=["8","9","a","b"];kt.empty=new Ir("00000000-0000-0000-0000-000000000000");function Hs(){return new B}kt.v4=Hs;var Hl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function js(t){return Hl.test(t)}kt.isUUID=js;function jl(t){if(!js(t))throw new Error("invalid uuid");return new Ir(t)}kt.parse=jl;function Wl(){return Hs().asHex()}kt.generateUuid=Wl});var vn=W(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var gn=require("vscode"),Ws=me(),Ks=Ut(),zs=class{constructor(e,r){this._client=e,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Ws.WorkDoneProgress.type,this._token,n=>{switch(n.kind){case"begin":this.begin(n);break;case"report":this.report(n);break;case"end":this.done();break}})}begin(e){let r=e.cancellable?gn.ProgressLocation.Notification:gn.ProgressLocation.Window;gn.window.withProgress({location:r,cancellable:e.cancellable,title:e.title},async(n,o)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=o,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Ws.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((a,u)=>{this._resolve=a,this._reject=u})))}report(e){if(this._infinite&&Ks.string(e.message))this._progress.report({message:e.message});else if(Ks.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};mn.ProgressPart=zs});var $e=W(we=>{"use strict";function Kl(t){for(var e in t)we.hasOwnProperty(e)||(we[e]=t[e])}Object.defineProperty(we,"__esModule",{value:!0});var N=require("vscode"),h=me(),zl=Fs(),$l=Ls(),ae=Ut(),$s=As(),oe=pn(),Ul=vn();Kl(me());var Us=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}};function Gl(t,e,r,n){let o=new Us,a=h.createProtocolConnection(t,e,o);return a.onError(l=>{r(l[0],l[1],l[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:(l,...d)=>a.sendRequest(ae.string(l)?l:l.method,...d),onRequest:(l,d)=>a.onRequest(ae.string(l)?l:l.method,d),sendNotification:(l,d)=>a.sendNotification(ae.string(l)?l:l.method,d),onNotification:(l,d)=>a.onNotification(ae.string(l)?l:l.method,d),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(l,d,m)=>{let C={sendNotification:!1,traceFormat:h.TraceFormat.Text};m===void 0?a.trace(l,d,C):(ae.boolean(m),a.trace(l,d,m))},initialize:l=>a.sendRequest(h.InitializeRequest.type,l),shutdown:()=>a.sendRequest(h.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(h.ExitNotification.type),onLogMessage:l=>a.onNotification(h.LogMessageNotification.type,l),onShowMessage:l=>a.onNotification(h.ShowMessageNotification.type,l),onTelemetry:l=>a.onNotification(h.TelemetryEventNotification.type,l),didChangeConfiguration:l=>a.sendNotification(h.DidChangeConfigurationNotification.type,l),didChangeWatchedFiles:l=>a.sendNotification(h.DidChangeWatchedFilesNotification.type,l),didOpenTextDocument:l=>a.sendNotification(h.DidOpenTextDocumentNotification.type,l),didChangeTextDocument:l=>a.sendNotification(h.DidChangeTextDocumentNotification.type,l),didCloseTextDocument:l=>a.sendNotification(h.DidCloseTextDocumentNotification.type,l),didSaveTextDocument:l=>a.sendNotification(h.DidSaveTextDocumentNotification.type,l),onDiagnostics:l=>a.onNotification(h.PublishDiagnosticsNotification.type,l),dispose:()=>a.dispose()}}var Fr;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Fr=we.ErrorAction||(we.ErrorAction={}));var xt;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(xt=we.CloseAction||(we.CloseAction={}));var yn=class{constructor(e){this.name=e,this.restarts=[]}error(e,r,n){return n&&n<=3?Fr.Continue:Fr.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?xt.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(N.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),xt.DoNotRestart):(this.restarts.shift(),xt.Restart)}},cr;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(cr=we.RevealOutputChannelOn||(we.RevealOutputChannelOn={}));var Nr;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Nr=we.State||(we.State={}));var fe;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(fe||(fe={}));var Gs=[h.SymbolKind.File,h.SymbolKind.Module,h.SymbolKind.Namespace,h.SymbolKind.Package,h.SymbolKind.Class,h.SymbolKind.Method,h.SymbolKind.Property,h.SymbolKind.Field,h.SymbolKind.Constructor,h.SymbolKind.Enum,h.SymbolKind.Interface,h.SymbolKind.Function,h.SymbolKind.Variable,h.SymbolKind.Constant,h.SymbolKind.String,h.SymbolKind.Number,h.SymbolKind.Boolean,h.SymbolKind.Array,h.SymbolKind.Object,h.SymbolKind.Key,h.SymbolKind.Null,h.SymbolKind.EnumMember,h.SymbolKind.Struct,h.SymbolKind.Event,h.SymbolKind.Operator,h.SymbolKind.TypeParameter],Xl=[h.CompletionItemKind.Text,h.CompletionItemKind.Method,h.CompletionItemKind.Function,h.CompletionItemKind.Constructor,h.CompletionItemKind.Field,h.CompletionItemKind.Variable,h.CompletionItemKind.Class,h.CompletionItemKind.Interface,h.CompletionItemKind.Module,h.CompletionItemKind.Property,h.CompletionItemKind.Unit,h.CompletionItemKind.Value,h.CompletionItemKind.Enum,h.CompletionItemKind.Keyword,h.CompletionItemKind.Snippet,h.CompletionItemKind.Color,h.CompletionItemKind.File,h.CompletionItemKind.Reference,h.CompletionItemKind.Folder,h.CompletionItemKind.EnumMember,h.CompletionItemKind.Constant,h.CompletionItemKind.Struct,h.CompletionItemKind.Event,h.CompletionItemKind.Operator,h.CompletionItemKind.TypeParameter];function L(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Cn;(function(t){function e(r){let n=r;return n&&ae.func(n.register)&&ae.func(n.unregister)&&ae.func(n.dispose)&&n.messages!==void 0}t.is=e})(Cn||(Cn={}));var Be=class{constructor(e,r,n,o,a,u){this._client=e,this._event=r,this._type=n,this._middleware=o,this._createParams=a,this._selectorFilter=u,this._selectors=new Map}static textDocumentFilter(e,r){for(let n of e)if(N.languages.match(n,r))return!0;return!1}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(N.languages.match(r,e))return{send:n=>{this.callback(n)}};throw new Error("No provider available for the given text document")}},Xs=class extends Be{constructor(e,r){super(e,N.workspace.onDidOpenTextDocument,h.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),Be.textDocumentFilter);this._syncedDocuments=r}get messages(){return h.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){L(L(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){if(super.register(e,r),!r.registerOptions.documentSelector)return;let n=r.registerOptions.documentSelector;N.workspace.textDocuments.forEach(o=>{let a=o.uri.toString();if(!this._syncedDocuments.has(a)&&N.languages.match(n,o)){let u=this._client.clientOptions.middleware,l=d=>{this._client.sendNotification(this._type,this._createParams(d))};u.didOpen?u.didOpen(o,l):l(o),this._syncedDocuments.set(a,o)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},Bs=class extends Be{constructor(e,r){super(e,N.workspace.onDidCloseTextDocument,h.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),Be.textDocumentFilter);this._syncedDocuments=r}get messages(){return h.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){L(L(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(o=>{if(N.languages.match(r,o)&&!this._selectorFilter(n,o)){let a=this._client.clientOptions.middleware,u=l=>{this._client.sendNotification(this._type,this._createParams(l))};this._syncedDocuments.delete(o.uri.toString()),a.didClose?a.didClose(o,u):u(o)}})}},Js=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return h.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){L(L(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==h.TextDocumentSyncKind.None&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=N.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(r.id,{documentSelector:r.registerOptions.documentSelector,syncKind:r.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let r of this._changeData.values())if(N.languages.match(r.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===h.TextDocumentSyncKind.Incremental){let o=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(h.DidChangeTextDocumentNotification.type,o)):this._client.sendNotification(h.DidChangeTextDocumentNotification.type,o)}else if(r.syncKind===h.TextDocumentSyncKind.Full){let o=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new $s.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(h.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(e,o):o(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let r of this._changeData.values())if(N.languages.match(r.documentSelector,e))return{send:n=>{this.callback(n)}};throw new Error("No provider available for the given text document")}},Vs=class extends Be{constructor(e){super(e,N.workspace.onWillSaveTextDocument,h.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>Be.textDocumentFilter(r,n.document))}get messages(){return h.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}},Qs=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return h.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{documentSelector:r}})}register(e,r){!r.registerOptions.documentSelector||(this._listener||(this._listener=N.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(r.id,r.registerOptions.documentSelector))}callback(e){if(Be.textDocumentFilter(this._selectors.values(),e.document)){let r=this._client.clientOptions.middleware,n=o=>this._client.sendRequest(h.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(o)).then(a=>{let u=this._client.protocol2CodeConverter.asTextEdits(a);return u===void 0?[]:u});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Ys=class extends Be{constructor(e){super(e,N.workspace.onDidSaveTextDocument,h.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),Be.textDocumentFilter)}get messages(){return h.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){L(L(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.save&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{includeText:!!n.save.includeText})})}register(e,r){this._includeText=!!r.registerOptions.includeText,super.register(e,r)}},Zs=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}get messages(){return h.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){L(L(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,r){}register(e,r){if(!Array.isArray(r.registerOptions.watchers))return;let n=[];for(let o of r.registerOptions.watchers){if(!ae.string(o.globPattern))continue;let a=!0,u=!0,l=!0;o.kind!==void 0&&o.kind!==null&&(a=(o.kind&h.WatchKind.Create)!==0,u=(o.kind&h.WatchKind.Change)!==0,l=(o.kind&h.WatchKind.Delete)!==0);let d=N.workspace.createFileSystemWatcher(o.globPattern,!a,!u,!l);this.hookListeners(d,a,u,l),n.push(d)}this._watchers.set(r.id,n)}registerRaw(e,r){let n=[];for(let o of r)this.hookListeners(o,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,o,a){r&&e.onDidCreate(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Created}),null,a),n&&e.onDidChange(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Changed}),null,a),o&&e.onDidDelete(u=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(u),type:h.FileChangeType.Deleted}),null,a)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}},Te=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!r.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],data:r,provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(h.TextDocumentRegistrationOptions.is(r)){let n=h.StaticRegistrationOptions.hasId(r)?r.id:oe.generateUuid(),o=r.documentSelector||e;if(o)return[n,Object.assign({},r,{documentSelector:o})]}else if(ae.boolean(r)&&r===!0||h.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[oe.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return ae.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&N.languages.match(n,e))return r.provider}throw new Error(`The feature has no registration for the provided text document ${e.uri.toString()}`)}};we.TextDocumentFeature=Te;var eo=class{constructor(e,r){this._client=e,this._message=r,this._registrations=new Map}get messages(){return this._message}register(e,r){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(r.registerOptions);this._registrations.set(r.id,{disposable:n[0],provider:n[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}},to=class extends Te{constructor(e){super(e,h.CompletionRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[h.CompletionItemTag.Deprecated]}},r.completionItemKind={valueSet:Xl}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.triggerCharacters||[],n={provideCompletionItems:(o,a,u,l)=>{let d=this._client,m=this._client.clientOptions.middleware,C=(v,P,D,A)=>d.sendRequest(h.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(v,P,D),A).then(d.protocol2CodeConverter.asCompletionResult,M=>(d.logFailedRequest(h.CompletionRequest.type,M),Promise.resolve([])));return m.provideCompletionItem?m.provideCompletionItem(o,a,l,u,C):C(o,a,l,u)},resolveCompletionItem:e.resolveProvider?(o,a)=>{let u=this._client,l=this._client.clientOptions.middleware,d=(m,C)=>u.sendRequest(h.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(m),C).then(u.protocol2CodeConverter.asCompletionItem,v=>(u.logFailedRequest(h.CompletionResolveRequest.type,v),Promise.resolve(m)));return l.resolveCompletionItem?l.resolveCompletionItem(o,a,d):d(o,a)}:void 0};return[N.languages.registerCompletionItemProvider(e.documentSelector,n,...r),n]}},ro=class extends Te{constructor(e){super(e,h.HoverRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[h.MarkupKind.Markdown,h.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideHover:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(h.HoverRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asHover,P=>(u.logFailedRequest(h.HoverRequest.type,P),Promise.resolve(null))),d=u.clientOptions.middleware;return d.provideHover?d.provideHover(n,o,a,l):l(n,o,a)}};return[N.languages.registerHoverProvider(e.documentSelector,r),r]}},no=class extends Te{constructor(e){super(e,h.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[h.MarkupKind.Markdown,h.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(o,a,u,l)=>{let d=this._client,m=(v,P,D,A)=>d.sendRequest(h.SignatureHelpRequest.type,d.code2ProtocolConverter.asSignatureHelpParams(v,P,D),A).then(d.protocol2CodeConverter.asSignatureHelp,M=>(d.logFailedRequest(h.SignatureHelpRequest.type,M),Promise.resolve(null))),C=d.clientOptions.middleware;return C.provideSignatureHelp?C.provideSignatureHelp(o,a,l,u,m):m(o,a,l,u)}},n;if(e.retriggerCharacters===void 0){let o=e.triggerCharacters||[];n=N.languages.registerSignatureHelpProvider(e.documentSelector,r,...o)}else{let o={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=N.languages.registerSignatureHelpProvider(e.documentSelector,r,o)}return[n,r]}},io=class extends Te{constructor(e){super(e,h.DefinitionRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDefinition:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(h.DefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(h.DefinitionRequest.type,P),Promise.resolve(null))),d=u.clientOptions.middleware;return d.provideDefinition?d.provideDefinition(n,o,a,l):l(n,o,a)}};return[N.languages.registerDefinitionProvider(e.documentSelector,r),r]}},so=class extends Te{constructor(e){super(e,h.ReferencesRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideReferences:(n,o,a,u)=>{let l=this._client,d=(C,v,P,D)=>l.sendRequest(h.ReferencesRequest.type,l.code2ProtocolConverter.asReferenceParams(C,v,P),D).then(l.protocol2CodeConverter.asReferences,A=>(l.logFailedRequest(h.ReferencesRequest.type,A),Promise.resolve([]))),m=l.clientOptions.middleware;return m.provideReferences?m.provideReferences(n,o,a,u,d):d(n,o,a,u)}};return[N.languages.registerReferenceProvider(e.documentSelector,r),r]}},oo=class extends Te{constructor(e){super(e,h.DocumentHighlightRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentHighlights:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(h.DocumentHighlightRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asDocumentHighlights,P=>(u.logFailedRequest(h.DocumentHighlightRequest.type,P),Promise.resolve([]))),d=u.clientOptions.middleware;return d.provideDocumentHighlights?d.provideDocumentHighlights(n,o,a,l):l(n,o,a)}};return[N.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}},ao=class extends Te{constructor(e){super(e,h.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Gs},r.hierarchicalDocumentSymbolSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentSymbols:(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(d),m).then(C=>{if(C!==null){if(C.length===0)return[];{let v=C[0];return h.DocumentSymbol.is(v)?a.protocol2CodeConverter.asDocumentSymbols(C):a.protocol2CodeConverter.asSymbolInformations(C)}}},C=>(a.logFailedRequest(h.DocumentSymbolRequest.type,C),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(n,o,u):u(n,o)}};return[N.languages.registerDocumentSymbolProvider(e.documentSelector,r),r]}},co=class extends eo{constructor(e){super(e,h.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=L(L(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Gs}}initialize(e){!e.workspaceSymbolProvider||this.register(this.messages,{id:oe.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.WorkspaceSymbolRequest.type,{query:d},m).then(a.protocol2CodeConverter.asSymbolInformations,C=>(a.logFailedRequest(h.WorkspaceSymbolRequest.type,C),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideWorkspaceSymbols?l.provideWorkspaceSymbols(n,o,u):u(n,o)}};return[N.languages.registerWorkspaceSymbolProvider(r),r]}},uo=class extends Te{constructor(e){super(e,h.CodeActionRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.codeActionLiteralSupport={codeActionKind:{valueSet:[h.CodeActionKind.Empty,h.CodeActionKind.QuickFix,h.CodeActionKind.Refactor,h.CodeActionKind.RefactorExtract,h.CodeActionKind.RefactorInline,h.CodeActionKind.RefactorRewrite,h.CodeActionKind.Source,h.CodeActionKind.SourceOrganizeImports]}}}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeActions:(n,o,a,u)=>{let l=this._client,d=(C,v,P,D)=>{let A={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(C),range:l.code2ProtocolConverter.asRange(v),context:l.code2ProtocolConverter.asCodeActionContext(P)};return l.sendRequest(h.CodeActionRequest.type,A,D).then(M=>{if(M===null)return;let K=[];for(let k of M)h.Command.is(k)?K.push(l.protocol2CodeConverter.asCommand(k)):K.push(l.protocol2CodeConverter.asCodeAction(k));return K},M=>(l.logFailedRequest(h.CodeActionRequest.type,M),Promise.resolve([])))},m=l.clientOptions.middleware;return m.provideCodeActions?m.provideCodeActions(n,o,a,u,d):d(n,o,a,u)}};return[N.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},lo=class extends Te{constructor(e){super(e,h.CodeLensRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeLensProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideCodeLenses:(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(d),m).then(a.protocol2CodeConverter.asCodeLenses,C=>(a.logFailedRequest(h.CodeLensRequest.type,C),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideCodeLenses?l.provideCodeLenses(n,o,u):u(n,o)},resolveCodeLens:e.resolveProvider?(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(d),m).then(a.protocol2CodeConverter.asCodeLens,C=>(a.logFailedRequest(h.CodeLensResolveRequest.type,C),d)),l=a.clientOptions.middleware;return l.resolveCodeLens?l.resolveCodeLens(n,o,u):u(n,o)}:void 0};return[N.languages.registerCodeLensProvider(e.documentSelector,r),r]}},fo=class extends Te{constructor(e){super(e,h.DocumentFormattingRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentFormattingEdits:(n,o,a)=>{let u=this._client,l=(m,C,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),options:u.code2ProtocolConverter.asFormattingOptions(C)};return u.sendRequest(h.DocumentFormattingRequest.type,P,v).then(u.protocol2CodeConverter.asTextEdits,D=>(u.logFailedRequest(h.DocumentFormattingRequest.type,D),Promise.resolve([])))},d=u.clientOptions.middleware;return d.provideDocumentFormattingEdits?d.provideDocumentFormattingEdits(n,o,a,l):l(n,o,a)}};return[N.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}},ho=class extends Te{constructor(e){super(e,h.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentRangeFormattingEdits:(n,o,a,u)=>{let l=this._client,d=(C,v,P,D)=>{let A={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(C),range:l.code2ProtocolConverter.asRange(v),options:l.code2ProtocolConverter.asFormattingOptions(P)};return l.sendRequest(h.DocumentRangeFormattingRequest.type,A,D).then(l.protocol2CodeConverter.asTextEdits,M=>(l.logFailedRequest(h.DocumentRangeFormattingRequest.type,M),Promise.resolve([])))},m=l.clientOptions.middleware;return m.provideDocumentRangeFormattingEdits?m.provideDocumentRangeFormattingEdits(n,o,a,u,d):d(n,o,a,u)}};return[N.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}},po=class extends Te{constructor(e){super(e,h.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){L(L(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideOnTypeFormattingEdits:(o,a,u,l,d)=>{let m=this._client,C=(P,D,A,M,K)=>{let k={textDocument:m.code2ProtocolConverter.asTextDocumentIdentifier(P),position:m.code2ProtocolConverter.asPosition(D),ch:A,options:m.code2ProtocolConverter.asFormattingOptions(M)};return m.sendRequest(h.DocumentOnTypeFormattingRequest.type,k,K).then(m.protocol2CodeConverter.asTextEdits,F=>(m.logFailedRequest(h.DocumentOnTypeFormattingRequest.type,F),Promise.resolve([])))},v=m.clientOptions.middleware;return v.provideOnTypeFormattingEdits?v.provideOnTypeFormattingEdits(o,a,u,l,d,C):C(o,a,u,l,d)}},n=e.moreTriggerCharacter||[];return[N.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...n),r]}},go=class extends Te{constructor(e){super(e,h.RenameRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);!n||(ae.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register(this.messages,{id:oe.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r={provideRenameEdits:(n,o,a,u)=>{let l=this._client,d=(C,v,P,D)=>{let A={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(C),position:l.code2ProtocolConverter.asPosition(v),newName:P};return l.sendRequest(h.RenameRequest.type,A,D).then(l.protocol2CodeConverter.asWorkspaceEdit,M=>(l.logFailedRequest(h.RenameRequest.type,M),Promise.reject(new Error(M.message))))},m=l.clientOptions.middleware;return m.provideRenameEdits?m.provideRenameEdits(n,o,a,u,d):d(n,o,a,u)},prepareRename:e.prepareProvider?(n,o,a)=>{let u=this._client,l=(m,C,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),position:u.code2ProtocolConverter.asPosition(C)};return u.sendRequest(h.PrepareRenameRequest.type,P,v).then(D=>h.Range.is(D)?u.protocol2CodeConverter.asRange(D):D&&h.Range.is(D.range)?{range:u.protocol2CodeConverter.asRange(D.range),placeholder:D.placeholder}:Promise.reject(new Error("The element can't be renamed.")),D=>(u.logFailedRequest(h.PrepareRenameRequest.type,D),Promise.reject(new Error(D.message))))},d=u.clientOptions.middleware;return d.prepareRename?d.prepareRename(n,o,a,l):l(n,o,a)}:void 0};return[N.languages.registerRenameProvider(e.documentSelector,r),r]}},mo=class extends Te{constructor(e){super(e,h.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=L(L(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);!n||this.register(this.messages,{id:oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideDocumentLinks:(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(d),m).then(a.protocol2CodeConverter.asDocumentLinks,C=>(a.logFailedRequest(h.DocumentLinkRequest.type,C),Promise.resolve([]))),l=a.clientOptions.middleware;return l.provideDocumentLinks?l.provideDocumentLinks(n,o,u):u(n,o)},resolveDocumentLink:e.resolveProvider?(n,o)=>{let a=this._client,u=(d,m)=>a.sendRequest(h.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(d),m).then(a.protocol2CodeConverter.asDocumentLink,C=>(a.logFailedRequest(h.DocumentLinkResolveRequest.type,C),Promise.resolve(d))),l=a.clientOptions.middleware;return l.resolveDocumentLink?l.resolveDocumentLink(n,o,u):u(n,o)}:void 0};return[N.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}},vo=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return h.DidChangeConfigurationNotification.type}fillClientCapabilities(e){L(L(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:oe.generateUuid(),registerOptions:{section:e}})}register(e,r){let n=N.workspace.onDidChangeConfiguration(o=>{this.onDidChangeConfiguration(r.registerOptions.section,o)});this._listeners.set(r.id,n),r.registerOptions.section!==void 0&&this.onDidChangeConfiguration(r.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,r){let n;if(ae.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(l=>r.affectsConfiguration(l)))return;let o=u=>{if(u===void 0){this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(h.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(u)})},a=this.getMiddleware();a?a(n,o):o(n)}extractSettingsInformation(e){function r(a,u){let l=a;for(let d=0;d<u.length-1;d++){let m=l[u[d]];m||(m=Object.create(null),l[u[d]]=m),l=m}return l}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let a=0;a<e.length;a++){let u=e[a],l=u.indexOf("."),d=null;if(l>=0?d=N.workspace.getConfiguration(u.substr(0,l),n).get(u.substr(l+1)):d=N.workspace.getConfiguration(u,n),d){let m=e[a].split(".");r(o,m)[m[m.length-1]]=d}}return o}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},yo=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return h.ExecuteCommandRequest.type}fillClientCapabilities(e){L(L(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register(this.messages,{id:oe.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,r){let n=this._client,o=n.clientOptions.middleware,a=(u,l)=>{let d={command:u,arguments:l};return n.sendRequest(h.ExecuteCommandRequest.type,d).then(void 0,m=>{n.logFailedRequest(h.ExecuteCommandRequest.type,m)})};if(r.registerOptions.commands){let u=[];for(let l of r.registerOptions.commands)u.push(N.commands.registerCommand(l,(...d)=>o.executeCommand?o.executeCommand(l,d,a):a(l,d)));this._commands.set(r.id,u)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}},Bl;(function(t){function e(r){return r&&h.MessageReader.is(r.reader)&&h.MessageWriter.is(r.writer)}t.is=e})(Bl=we.MessageTransports||(we.MessageTransports={}));var Rn=class{constructor(e,r){this._resolve=e,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Co=class{constructor(e,r,n){this._traceFormat=h.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=r,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||cr.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||new yn(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=fe.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new $s.Delayer(250),this._onReady=new Promise((o,a)=>{this._onReadyCallbacks=new Rn(o,a)}),this._onStop=void 0,this._telemetryEmitter=new h.Emitter,this._stateChangeEmitter=new h.Emitter,this._tracer={log:(o,a)=>{ae.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=zl.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=$l.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===fe.Running?Nr.Running:this.state===fe.Starting?Nr.Starting:Nr.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...r)}catch(n){throw this.error(`Sending request ${ae.string(e)?e:e.method} failed.`,n),n}}onRequest(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,r)}catch(n){throw this.error(`Registering request handler ${ae.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,r)}catch(n){throw this.error(`Sending notification ${ae.string(e)?e:e.method} failed.`,n),n}}onNotification(e,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,r)}catch(n){throw this.error(`Registering notification handler ${ae.string(e)?e:e.method} failed.`,n),n}}onProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onProgress(e,r,n)}catch(o){throw this.error(`Registering progress handler for token ${r} failed.`,o),o}}sendProgress(e,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,r,n)}catch(o){throw this.error(`Sending progress for token ${r} failed.`,o),o}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=N.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new yn(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof h.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?ae.string(e.stack)?e.stack:e.message:ae.string(e)?e:e.toString()}info(e,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=cr.Info&&this.showNotificationMessage()}warn(e,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=cr.Warn&&this.showNotificationMessage()}error(e,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=cr.Error&&this.showNotificationMessage()}showNotificationMessage(){N.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===fe.Initial||this.state===fe.Stopping||this.state===fe.Stopped}needsStop(){return this.state===fe.Starting||this.state===fe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===fe.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,r)=>{this._onReadyCallbacks=new Rn(e,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?N.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):N.languages.createDiagnosticCollection()),this.state=fe.Starting,this.resolveConnection().then(e=>(e.onLogMessage(r=>{switch(r.type){case h.MessageType.Error:this.error(r.message,void 0,!1);break;case h.MessageType.Warning:this.warn(r.message,void 0,!1);break;case h.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),e.onShowMessage(r=>{switch(r.type){case h.MessageType.Error:N.window.showErrorMessage(r.message);break;case h.MessageType.Warning:N.window.showWarningMessage(r.message);break;case h.MessageType.Info:N.window.showInformationMessage(r.message);break;default:N.window.showInformationMessage(r.message)}}),e.onRequest(h.ShowMessageRequest.type,r=>{let n;switch(r.type){case h.MessageType.Error:n=N.window.showErrorMessage;break;case h.MessageType.Warning:n=N.window.showWarningMessage;break;case h.MessageType.Info:n=N.window.showInformationMessage;break;default:n=N.window.showInformationMessage}let o=r.actions||[];return n(r.message,...o)}),e.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=fe.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),N.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new N.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,clientInfo:{name:"vscode",version:N.version},rootPath:n||null,rootUri:n?this._c2p.asUri(N.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ae.func(r)?r():r,trace:h.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let a=oe.generateUuid(),u=new Ul.ProgressPart(e,a);return o.workDoneToken=a,this.doInitialize(e,o).then(l=>(u.done(),l),l=>{throw u.cancel(),l})}else return this.doInitialize(e,o)}doInitialize(e,r){return e.initialize(r).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=fe.Running;let o;return ae.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===h.TextDocumentSyncKind.None?o={openClose:!1,change:h.TextDocumentSyncKind.None,save:void 0}:o={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(o=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:o}),e.onDiagnostics(a=>this.handleDiagnostics(a)),e.onRequest(h.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),e.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),e.onRequest(h.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),e.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),e.onRequest(h.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),e.sendNotification(h.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof h.ResponseError&&n.data&&n.data.retry?N.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(o=>{o&&o.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&N.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=N.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===fe.Stopping&&this._onStop?this._onStop:(this.state=fe.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=fe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=fe.Stopped,Promise.resolve())}cleanUp(e=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._dynamicFeatures.values())n.dispose();e&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var r,n;let o=this;function a(l){o._fileEvents.push(l),o._fileEventDelayer.trigger(()=>{o.onReady().then(()=>{o.resolveConnection().then(d=>{o.isConnectionActive()&&(o.forceDocumentSync(),d.didChangeWatchedFiles({changes:o._fileEvents})),o._fileEvents=[]})},d=>{o.error("Notify file events failed.",d)})})}let u=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;((n=u)===null||n===void 0?void 0:n.didChangeWatchedFile)?u.didChangeWatchedFile(e,a):a(e)}forceDocumentSync(){this._dynamicFeatures.get(h.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let r=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),o=this.clientOptions.middleware;o.handleDiagnostics?o.handleDiagnostics(r,n,(a,u)=>this.setDiagnostics(a,u)):this.setDiagnostics(r,n)}setDiagnostics(e,r){!this._diagnostics||this._diagnostics.set(e,r)}createConnection(){let e=(n,o,a)=>{this.handleConnectionError(n,o,a)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>Gl(n.reader,n.writer,e,r))}handleConnectionClosed(){if(this.state===fe.Stopping||this.state===fe.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=xt.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===xt.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=fe.Stopped,this.cleanUp(!1,!0)):e===xt.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=fe.Initial,this.start())}handleConnectionError(e,r,n){this._clientOptions.errorHandler.error(e,r,n)===Fr.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){N.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,r=!1){let n=N.workspace.getConfiguration(this._id),o=h.Trace.Off,a=h.TraceFormat.Text;if(n){let u=n.get("trace.server","off");typeof u=="string"?o=h.Trace.fromString(u):(o=h.Trace.fromString(n.get("trace.server.verbosity","off")),a=h.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=a,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;ae.array(r)?n=r:n=[r],!!n&&this._dynamicFeatures.get(h.DidChangeWatchedFilesNotification.type.method).registerRaw(oe.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),Cn.is(e)){let r=e.messages;if(Array.isArray(r))for(let n of r)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(r.method,r),this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new vo(this)),this.registerFeature(new Xs(this,this._syncedDocuments)),this.registerFeature(new Js(this)),this.registerFeature(new Vs(this)),this.registerFeature(new Qs(this)),this.registerFeature(new Ys(this)),this.registerFeature(new Bs(this,this._syncedDocuments)),this.registerFeature(new Zs(this,e=>this.notifyFileEvent(e))),this.registerFeature(new to(this)),this.registerFeature(new ro(this)),this.registerFeature(new no(this)),this.registerFeature(new io(this)),this.registerFeature(new so(this)),this.registerFeature(new oo(this)),this.registerFeature(new ao(this)),this.registerFeature(new co(this)),this.registerFeature(new uo(this)),this.registerFeature(new lo(this)),this.registerFeature(new fo(this)),this.registerFeature(new ho(this)),this.registerFeature(new po(this)),this.registerFeature(new go(this)),this.registerFeature(new mo(this)),this.registerFeature(new yo(this))}fillInitializeParams(e){for(let r of this._features)ae.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};L(e,"workspace").applyEdit=!0;let r=L(L(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[h.ResourceOperationKind.Create,h.ResourceOperationKind.Rename,h.ResourceOperationKind.Delete],r.failureHandling=h.FailureHandlingKind.TextOnlyTransactional;let n=L(L(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[h.DiagnosticTag.Unnecessary,h.DiagnosticTag.Deprecated]};for(let o of this._features)o.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(e){return new Promise((r,n)=>{for(let o of e.registrations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Registration failed.`));return}let u=o.registerOptions||{};u.documentSelector=u.documentSelector||this._clientOptions.documentSelector;let l={id:o.id,registerOptions:u};a.register(this._method2Message.get(o.method),l)}r()})}handleUnregistrationRequest(e){return new Promise((r,n)=>{for(let o of e.unregisterations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Unregistration failed.`));return}a.unregister(o.id)}r()})}handleApplyWorkspaceEdit(e){let r=e.edit,n=new Map;N.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let o=!1;if(r.documentChanges){for(let a of r.documentChanges)if(h.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let u=n.get(a.textDocument.uri);if(u&&u.version!==a.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):ae.asPromise(N.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(a=>({applied:a})))}logFailedRequest(e,r){r instanceof h.ResponseError&&(r.code===h.ErrorCodes.RequestCancelled||r.code===h.ErrorCodes.ContentModified)||this.error(`Request ${e.method} failed.`,r)}};we.BaseLanguageClient=Co});var wo=W(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var Lr=require("vscode"),ur=me(),Jl=$e();function Ro(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var _o=class extends Jl.TextDocumentFeature{constructor(e){super(e,ur.DocumentColorRequest.type)}fillClientCapabilities(e){Ro(Ro(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.colorProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideColorPresentations:(n,o,a)=>{let u=this._client,l=(m,C,v)=>{let P={color:m,textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C.document),range:u.code2ProtocolConverter.asRange(C.range)};return u.sendRequest(ur.ColorPresentationRequest.type,P,v).then(this.asColorPresentations.bind(this),D=>(u.logFailedRequest(ur.ColorPresentationRequest.type,D),Promise.resolve(null)))},d=u.clientOptions.middleware;return d.provideColorPresentations?d.provideColorPresentations(n,o,a,l):l(n,o,a)},provideDocumentColors:(n,o)=>{let a=this._client,u=(d,m)=>{let C={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d)};return a.sendRequest(ur.DocumentColorRequest.type,C,m).then(this.asColorInformations.bind(this),v=>(a.logFailedRequest(ur.ColorPresentationRequest.type,v),Promise.resolve(null)))},l=a.clientOptions.middleware;return l.provideDocumentColors?l.provideDocumentColors(n,o,u):u(n,o)}};return[Lr.languages.registerColorProvider(e.documentSelector,r),r]}asColor(e){return new Lr.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(r=>new Lr.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(r=>{let n=new Lr.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};_n.ColorProviderFeature=_o});var Eo=W(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var wn=require("vscode"),Vl=me(),To=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Vl.ConfigurationRequest.type,(r,n)=>{let o=u=>{let l=[];for(let d of u.items){let m=d.scopeUri!==void 0&&d.scopeUri!==null?this._client.protocol2CodeConverter.asUri(d.scopeUri):void 0;l.push(this.getConfiguration(m,d.section!==null?d.section:void 0))}return l},a=e.clientOptions.middleware.workspace;return a&&a.configuration?a.configuration(r,n,o):o(r,n)})}getConfiguration(e,r){let n=null;if(r){let o=r.lastIndexOf(".");if(o===-1)n=wn.workspace.getConfiguration(void 0,e).get(r);else{let a=wn.workspace.getConfiguration(r.substr(0,o),e);a&&(n=a.get(r.substr(o+1)))}}else{let o=wn.workspace.getConfiguration(void 0,e);n={};for(let a of Object.keys(o))o.has(a)&&(n[a]=o.get(a))}return n||null}};Tn.ConfigurationFeature=To});var Do=W(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Ql=require("vscode"),En=me(),Yl=$e();function Po(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var So=class extends Yl.TextDocumentFeature{constructor(e){super(e,En.ImplementationRequest.type)}fillClientCapabilities(e){let r=Po(Po(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.implementationProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideImplementation:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(En.ImplementationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(En.ImplementationRequest.type,P),Promise.resolve(null))),d=u.clientOptions.middleware;return d.provideImplementation?d.provideImplementation(n,o,a,l):l(n,o,a)}};return[Ql.languages.registerImplementationProvider(e.documentSelector,r),r]}};Pn.ImplementationFeature=So});var Oo=W(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});var Zl=require("vscode"),Sn=me(),ed=$e();function Mr(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var bo=class extends ed.TextDocumentFeature{constructor(e){super(e,Sn.TypeDefinitionRequest.type)}fillClientCapabilities(e){Mr(Mr(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=Mr(Mr(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.typeDefinitionProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideTypeDefinition:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(Sn.TypeDefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asDefinitionResult,P=>(u.logFailedRequest(Sn.TypeDefinitionRequest.type,P),Promise.resolve(null))),d=u.clientOptions.middleware;return d.provideTypeDefinition?d.provideTypeDefinition(n,o,a,l):l(n,o,a)}};return[Zl.languages.registerTypeDefinitionProvider(e.documentSelector,r),r]}};Dn.TypeDefinitionFeature=bo});var ko=W(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});var td=pn(),Ar=require("vscode"),bn=me();function On(t,e){if(t!==void 0)return t[e]}function qn(t,e){return t.filter(r=>e.indexOf(r)<0)}Hr.arrayDiff=qn;var qo=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return bn.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=Ar.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(bn.WorkspaceFoldersRequest.type,a=>{let u=()=>{let d=Ar.workspace.workspaceFolders;return d===void 0?null:d.map(C=>this.asProtocol(C))},l=r.clientOptions.middleware.workspace;return l&&l.workspaceFolders?l.workspaceFolders(a,u):u(a)});let n=On(On(On(e,"workspace"),"workspaceFolders"),"changeNotifications"),o;typeof n=="string"?o=n:n===!0&&(o=td.generateUuid()),o&&this.register(this.messages,{id:o,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let r=qn(this._initialFolders,e),n=qn(e,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,r){let n={event:{added:e.map(o=>this.asProtocol(o)),removed:r.map(o=>this.asProtocol(o))}};this._client.sendNotification(bn.DidChangeWorkspaceFoldersNotification.type,n)}register(e,r){let n=r.id,o=this._client,a=Ar.workspace.onDidChangeWorkspaceFolders(u=>{let l=m=>{this.doSendEvent(m.added,m.removed)},d=o.clientOptions.middleware.workspace;d&&d.didChangeWorkspaceFolders?d.didChangeWorkspaceFolders(u,l):l(u)});this._listeners.set(n,a),this.sendInitialEvent(Ar.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Hr.WorkspaceFoldersFeature=qo});var No=W(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var lr=require("vscode"),Gt=me(),rd=$e();function xo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Io=class extends rd.TextDocumentFeature{constructor(e){super(e,Gt.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=xo(xo(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.foldingRangeProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideFoldingRanges:(n,o,a)=>{let u=this._client,l=(m,C,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m)};return u.sendRequest(Gt.FoldingRangeRequest.type,P,v).then(this.asFoldingRanges.bind(this),D=>(u.logFailedRequest(Gt.FoldingRangeRequest.type,D),Promise.resolve(null)))},d=u.clientOptions.middleware;return d.provideFoldingRanges?d.provideFoldingRanges(n,o,a,l):l(n,o,a)}};return[lr.languages.registerFoldingRangeProvider(e.documentSelector,r),r]}asFoldingRangeKind(e){if(e)switch(e){case Gt.FoldingRangeKind.Comment:return lr.FoldingRangeKind.Comment;case Gt.FoldingRangeKind.Imports:return lr.FoldingRangeKind.Imports;case Gt.FoldingRangeKind.Region:return lr.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(r=>new lr.FoldingRange(r.startLine,r.endLine,this.asFoldingRangeKind(r.kind))):[]}};kn.FoldingRangeFeature=Io});var Mo=W(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var nd=require("vscode"),xn=me(),id=$e();function Fo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Lo=class extends id.TextDocumentFeature{constructor(e){super(e,xn.DeclarationRequest.type)}fillClientCapabilities(e){let r=Fo(Fo(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.declarationProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideDeclaration:(n,o,a)=>{let u=this._client,l=(m,C,v)=>u.sendRequest(xn.DeclarationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(m,C),v).then(u.protocol2CodeConverter.asDeclarationResult,P=>(u.logFailedRequest(xn.DeclarationRequest.type,P),Promise.resolve(null))),d=u.clientOptions.middleware;return d.provideDeclaration?d.provideDeclaration(n,o,a,l):l(n,o,a)}};return[nd.languages.registerDeclarationProvider(e.documentSelector,r),r]}};In.DeclarationFeature=Lo});var jo=W(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var sd=require("vscode"),Nn=me(),od=$e();function Ao(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Ho=class extends od.TextDocumentFeature{constructor(e){super(e,Nn.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=Ao(Ao(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,o]=this.getRegistration(r,e.selectionRangeProvider);!n||!o||this.register(this.messages,{id:n,registerOptions:o})}registerLanguageProvider(e){let r={provideSelectionRanges:(n,o,a)=>{let u=this._client,l=(m,C,v)=>{let P={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(m),positions:u.code2ProtocolConverter.asPositions(C)};return u.sendRequest(Nn.SelectionRangeRequest.type,P,v).then(D=>u.protocol2CodeConverter.asSelectionRanges(D),D=>(u.logFailedRequest(Nn.SelectionRangeRequest.type,D),Promise.resolve(null)))},d=u.clientOptions.middleware;return d.provideSelectionRanges?d.provideSelectionRanges(n,o,a,l):l(n,o,a)}};return[sd.languages.registerSelectionRangeProvider(e.documentSelector,r),r]}};Fn.SelectionRangeFeature=Ho});var Ko=W(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var ad=me(),cd=vn();function ud(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Wo=class{constructor(e){this._client=e}fillClientCapabilities(e){ud(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=n=>{new cd.ProgressPart(this._client,n.token)};e.onRequest(ad.WorkDoneProgressCreateRequest.type,r)}};Ln.ProgressFeature=Wo});var Go=W(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var jr=require("vscode"),It=me(),ld=$e();function zo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var dr;(function(t){function e(l,d){if(d===null)return;let m=new jr.CallHierarchyItem(l.asSymbolKind(d.kind),d.name,d.detail||"",l.asUri(d.uri),l.asRange(d.range),l.asRange(d.selectionRange));return d.tags!==void 0&&(m.tags=l.asSymbolTags(d.tags)),m}t.asCallHierarchyItem=e;function r(l,d){return d===null?void 0:d.map(C=>e(l,C))[0]}t.asCallHierarchyItems=r;function n(l,d){return new jr.CallHierarchyIncomingCall(e(l,d.from),l.asRanges(d.fromRanges))}t.asCallHierarchyIncomingCall=n;function o(l,d){if(d!==null)return d.map(m=>n(l,m))}t.asCallHierarchyIncomingCalls=o;function a(l,d){return new jr.CallHierarchyOutgoingCall(e(l,d.to),l.asRanges(d.fromRanges))}t.asCallHierarchyOutgoingCall=a;function u(l,d){if(d!==null)return d.map(m=>a(l,m))}t.asCallHierarchyOutgoingCalls=u})(dr||(dr={}));var Wr;(function(t){function e(r,n){let o={name:n.name,kind:r.asSymbolKind(n.kind),uri:r.asUri(n.uri),range:r.asRange(n.range),selectionRange:r.asRange(n.selectionRange)};return n.detail!==void 0&&n.detail.length>0&&(o.detail=n.detail),n.tags!==void 0&&(o.tags=r.asSymbolTags(n.tags)),o}t.asCallHierarchyItem=e})(Wr||(Wr={}));var $o=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,r,n){let o=this.client,a=this.middleware,u=(l,d,m)=>{let C=o.code2ProtocolConverter.asTextDocumentPositionParams(l,d);return o.sendRequest(It.Proposed.CallHierarchyPrepareRequest.type,C,m).then(v=>dr.asCallHierarchyItems(this.client.protocol2CodeConverter,v),v=>(o.logFailedRequest(It.Proposed.CallHierarchyPrepareRequest.type,v),Promise.resolve(null)))};return a.prepareCallHierarchy?a.prepareCallHierarchy(e,r,n,u):u(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,o=this.middleware,a=(u,l)=>{let d={item:Wr.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(It.Proposed.CallHierarchyIncomingCallsRequest.type,d,l).then(m=>dr.asCallHierarchyIncomingCalls(n.protocol2CodeConverter,m),m=>(n.logFailedRequest(It.Proposed.CallHierarchyIncomingCallsRequest.type,m),Promise.resolve(null)))};return o.provideCallHierarchyIncomingCalls?o.provideCallHierarchyIncomingCalls(e,r,a):a(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,o=this.middleware,a=(u,l)=>{let d={item:Wr.asCallHierarchyItem(n.code2ProtocolConverter,u)};return n.sendRequest(It.Proposed.CallHierarchyOutgoingCallsRequest.type,d,l).then(m=>dr.asCallHierarchyOutgoingCalls(n.protocol2CodeConverter,m),m=>(n.logFailedRequest(It.Proposed.CallHierarchyOutgoingCallsRequest.type,m),Promise.resolve(null)))};return o.provideCallHierarchyOutgingCalls?o.provideCallHierarchyOutgingCalls(e,r,a):a(e,r)}},Uo=class extends ld.TextDocumentFeature{constructor(e){super(e,It.Proposed.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=zo(zo(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let n=e,[o,a]=this.getRegistration(r,n.callHierarchyProvider);!o||!a||this.register(this.messages,{id:o,registerOptions:a})}registerLanguageProvider(e){let r=this._client,n=new $o(r);return[jr.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};Mn.CallHierarchyFeature=Uo});var Jo=W(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var Xt=require("vscode"),dd=$e(),ee=me();function Xo(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Nt;(function(t){function e(a){if(a!=null)return new Xt.SemanticTokens(new Uint32Array(a.data),a.resultId)}t.asSemanticTokens=e;function r(a){return new Xt.SemanticTokensEdit(a.start,a.deleteCount,a.data!==void 0?new Uint32Array(a.data):void 0)}t.asSemanticTokensEdit=r;function n(a){if(a!=null)return new Xt.SemanticTokensEdits(a.edits.map(r),a.resultId)}t.asSemanticTokensEdits=n;function o(a){return a}t.asLegend=o})(Nt||(Nt={}));var Bo=class extends dd.TextDocumentFeature{constructor(e){super(e,ee.Proposed.SemanticTokensRequest.type)}fillClientCapabilities(e){let n=Xo(Xo(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[ee.Proposed.SemanticTokenTypes.comment,ee.Proposed.SemanticTokenTypes.keyword,ee.Proposed.SemanticTokenTypes.number,ee.Proposed.SemanticTokenTypes.regexp,ee.Proposed.SemanticTokenTypes.operator,ee.Proposed.SemanticTokenTypes.namespace,ee.Proposed.SemanticTokenTypes.type,ee.Proposed.SemanticTokenTypes.struct,ee.Proposed.SemanticTokenTypes.class,ee.Proposed.SemanticTokenTypes.interface,ee.Proposed.SemanticTokenTypes.enum,ee.Proposed.SemanticTokenTypes.typeParameter,ee.Proposed.SemanticTokenTypes.function,ee.Proposed.SemanticTokenTypes.member,ee.Proposed.SemanticTokenTypes.macro,ee.Proposed.SemanticTokenTypes.variable,ee.Proposed.SemanticTokenTypes.parameter,ee.Proposed.SemanticTokenTypes.property,ee.Proposed.SemanticTokenTypes.label],n.tokenModifiers=[ee.Proposed.SemanticTokenModifiers.declaration,ee.Proposed.SemanticTokenModifiers.documentation,ee.Proposed.SemanticTokenModifiers.static,ee.Proposed.SemanticTokenModifiers.abstract,ee.Proposed.SemanticTokenModifiers.deprecated,ee.Proposed.SemanticTokenModifiers.async,ee.Proposed.SemanticTokenModifiers.readonly]}initialize(e,r){let n=e,[o,a]=this.getRegistration(r,n.semanticTokensProvider);!o||!a||this.register(this.messages,{id:o,registerOptions:a})}registerLanguageProvider(e){let r=e.documentProvider!==void 0&&typeof e.documentProvider!="boolean"&&e.documentProvider.edits===!0,n={provideDocumentSemanticTokens:(d,m)=>{let C=this._client,v=C.clientOptions.middleware,P=(D,A)=>{let M={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(D)};return C.sendRequest(ee.Proposed.SemanticTokensRequest.type,M,A).then(K=>Nt.asSemanticTokens(K),K=>{C.logFailedRequest(ee.Proposed.SemanticTokensRequest.type,K)})};return v.provideDocumentSemanticTokens?v.provideDocumentSemanticTokens(d,m,P):P(d,m)},provideDocumentSemanticTokensEdits:r?(d,m,C)=>{let v=this._client,P=v.clientOptions.middleware,D=(A,M,K)=>{let k={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(A),previousResultId:M};return v.sendRequest(ee.Proposed.SemanticTokensEditsRequest.type,k,K).then(F=>ee.Proposed.SemanticTokens.is(F)?Nt.asSemanticTokens(F):Nt.asSemanticTokensEdits(F),F=>{v.logFailedRequest(ee.Proposed.SemanticTokensEditsRequest.type,F)})};return P.provideDocumentSemanticTokensEdits?P.provideDocumentSemanticTokensEdits(d,m,C,D):D(d,m,C)}:void 0},a=e.rangeProvider===!0?{provideDocumentRangeSemanticTokens:(d,m,C)=>{let v=this._client,P=v.clientOptions.middleware,D=(A,M,K)=>{let k={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(A),range:v.code2ProtocolConverter.asRange(M)};return v.sendRequest(ee.Proposed.SemanticTokensRangeRequest.type,k,K).then(F=>Nt.asSemanticTokens(F),F=>{v.logFailedRequest(ee.Proposed.SemanticTokensRangeRequest.type,F)})};return P.provideDocumentRangeSemanticTokens?P.provideDocumentRangeSemanticTokens(d,m,C,D):D(d,m,C)}}:void 0,u=[],l=Nt.asLegend(e.legend);return u.push(Xt.languages.registerDocumentSemanticTokensProvider(e.documentSelector,n,l)),a!==void 0&&u.push(Xt.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,l)),[new Xt.Disposable(()=>u.forEach(d=>d.dispose())),{document:n,range:a}]}};An.SemanticTokensFeature=Bo});var Qo=W(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});var Vo=require("child_process"),fd=require("path"),hd=process.platform==="win32",pd=process.platform==="darwin",gd=process.platform==="linux";function md(t,e){if(hd)try{let o={stdio:["pipe","pipe","ignore"]};return e&&(o.cwd=e),Vo.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],o),!0}catch{return!1}else if(gd||pd)try{var r=fd.join(__dirname,"terminateProcess.sh"),n=Vo.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}Hn.terminate=md});var ia=W(Je=>{"use strict";function vd(t){for(var e in t)Je.hasOwnProperty(e)||(Je[e]=t[e])}Object.defineProperty(Je,"__esModule",{value:!0});var Ft=require("child_process"),yd=require("fs"),Yo=Zn(),Zo=$e(),_t=require("vscode"),pe=me(),Cd=wo(),Rd=Eo(),_d=Do(),wd=Oo(),Td=ko(),Ed=No(),Pd=Mo(),Sd=jo(),Dd=Ko(),bd=Go(),Od=Jo(),ge=Ut(),qd=Qo();vd($e());var ea="^1.41.0",jn;(function(t){function e(r){return ge.string(r.command)}t.is=e})(jn||(jn={}));var Ce;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Ce=Je.TransportKind||(Je.TransportKind={}));var Bt;(function(t){function e(r){let n=r;return n&&n.kind===Ce.socket&&ge.number(n.port)}t.isSocket=e})(Bt||(Bt={}));var Wn;(function(t){function e(r){return ge.string(r.module)}t.is=e})(Wn||(Wn={}));var Kn;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(Kn||(Kn={}));var zn;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(zn||(zn={}));var ta=class extends Zo.BaseLanguageClient{constructor(e,r,n,o,a){let u,l,d,m,C;ge.string(r)?(u=e,l=r,d=n,m=o,C=!!a):(u=e.toLowerCase(),l=e,d=r,m=n,C=o),C===void 0&&(C=!1);super(u,l,m);this._serverOptions=d,this._forceDebug=C;try{this.checkVersion()}catch(v){throw ge.string(v.message)&&this.outputChannel.appendLine(v.message),v}}checkVersion(){let e=Yo.parse(_t.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${_t.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Yo.satisfies(e,ea))throw new Error(`The language client requires VS Code version ${ea} but received version ${_t.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),qd.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){function r(C,v){if(!C&&!v)return;let P=Object.create(null);return Object.keys(process.env).forEach(D=>P[D]=process.env[D]),v&&(P.ELECTRON_RUN_AS_NODE="1",P.ELECTRON_NO_ASAR="1"),C&&Object.keys(C).forEach(D=>P[D]=C[D]),P}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],o=["--debug","--debug-brk","--inspect","--inspect-brk"];function a(){let C=process.execArgv;return C?C.some(v=>n.some(P=>v.startsWith(P))||o.some(P=>v===P)):!1}function u(C){if(C.stdin===null||C.stdout===null||C.stderr===null)throw new Error("Process created without stdio streams")}let l=this._serverOptions;if(ge.func(l))return l().then(C=>{if(Zo.MessageTransports.is(C))return this._isDetached=!!C.detached,C;if(Kn.is(C))return this._isDetached=!!C.detached,{reader:new pe.StreamMessageReader(C.reader),writer:new pe.StreamMessageWriter(C.writer)};{let v;return zn.is(C)?(v=C.process,this._isDetached=C.detached):(v=C,this._isDetached=!1),v.stderr.on("data",P=>this.outputChannel.append(ge.string(P)?P:P.toString(e))),{reader:new pe.StreamMessageReader(v.stdout),writer:new pe.StreamMessageWriter(v.stdin)}}});let d,m=l;return m.run||m.debug?this._forceDebug||a()?d=m.debug:d=m.run:d=l,this._getServerWorkingDir(d.options).then(C=>{if(Wn.is(d)&&d.module){let v=d,P=v.transport||Ce.stdio;if(v.runtime){let D=[],A=v.options||Object.create(null);A.execArgv&&A.execArgv.forEach(k=>D.push(k)),D.push(v.module),v.args&&v.args.forEach(k=>D.push(k));let M=Object.create(null);M.cwd=C,M.env=r(A.env,!1);let K;if(P===Ce.ipc?(M.stdio=[null,null,null,"ipc"],D.push("--node-ipc")):P===Ce.stdio?D.push("--stdio"):P===Ce.pipe?(K=pe.generateRandomPipeName(),D.push(`--pipe=${K}`)):Bt.isSocket(P)&&D.push(`--socket=${P.port}`),D.push(`--clientProcessId=${process.pid.toString()}`),P===Ce.ipc||P===Ce.stdio){let k=Ft.spawn(v.runtime,D,M);return!k||!k.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=k,k.stderr.on("data",F=>this.outputChannel.append(ge.string(F)?F:F.toString(e))),P===Ce.ipc?(k.stdout.on("data",F=>this.outputChannel.append(ge.string(F)?F:F.toString(e))),Promise.resolve({reader:new pe.IPCMessageReader(k),writer:new pe.IPCMessageWriter(k)})):Promise.resolve({reader:new pe.StreamMessageReader(k.stdout),writer:new pe.StreamMessageWriter(k.stdin)}))}else{if(P===Ce.pipe)return pe.createClientPipeTransport(K).then(k=>{let F=Ft.spawn(v.runtime,D,M);return!F||!F.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=F,F.stderr.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),F.stdout.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))});if(Bt.isSocket(P))return pe.createClientSocketTransport(P.port).then(k=>{let F=Ft.spawn(v.runtime,D,M);return!F||!F.pid?Promise.reject(`Launching server using runtime ${v.runtime} failed.`):(this._serverProcess=F,F.stderr.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),F.stdout.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))})}}else{let D;return new Promise((A,M)=>{let K=v.args&&v.args.slice()||[];P===Ce.ipc?K.push("--node-ipc"):P===Ce.stdio?K.push("--stdio"):P===Ce.pipe?(D=pe.generateRandomPipeName(),K.push(`--pipe=${D}`)):Bt.isSocket(P)&&K.push(`--socket=${P.port}`),K.push(`--clientProcessId=${process.pid.toString()}`);let k=v.options||Object.create(null);if(k.env=r(k.env,!0),k.execArgv=k.execArgv||[],k.cwd=C,k.silent=!0,P===Ce.ipc||P===Ce.stdio){let F=Ft.fork(v.module,K||[],k);u(F),this._serverProcess=F,F.stderr.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),P===Ce.ipc?(F.stdout.on("data",q=>this.outputChannel.append(ge.string(q)?q:q.toString(e))),A({reader:new pe.IPCMessageReader(this._serverProcess),writer:new pe.IPCMessageWriter(this._serverProcess)})):A({reader:new pe.StreamMessageReader(F.stdout),writer:new pe.StreamMessageWriter(F.stdin)})}else P===Ce.pipe?pe.createClientPipeTransport(D).then(F=>{let q=Ft.fork(v.module,K||[],k);u(q),this._serverProcess=q,q.stderr.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),q.stdout.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),F.onConnected().then(J=>{A({reader:J[0],writer:J[1]})})}):Bt.isSocket(P)&&pe.createClientSocketTransport(P.port).then(F=>{let q=Ft.fork(v.module,K||[],k);u(q),this._serverProcess=q,q.stderr.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),q.stdout.on("data",J=>this.outputChannel.append(ge.string(J)?J:J.toString(e))),F.onConnected().then(J=>{A({reader:J[0],writer:J[1]})})})})}}else if(jn.is(d)&&d.command){let v=d,P=v.args||[],D=Object.assign({},v.options);D.cwd=D.cwd||C;let A=Ft.spawn(v.command,P,D);return!A||!A.pid?Promise.reject(`Launching server using command ${v.command} failed.`):(A.stderr.on("data",M=>this.outputChannel.append(ge.string(M)?M:M.toString(e))),this._serverProcess=A,this._isDetached=!!D.detached,Promise.resolve({reader:new pe.StreamMessageReader(A.stdout),writer:new pe.StreamMessageWriter(A.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(l,null,4)))})}registerProposedFeatures(){this.registerFeatures(na.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Rd.ConfigurationFeature(this)),this.registerFeature(new wd.TypeDefinitionFeature(this)),this.registerFeature(new _d.ImplementationFeature(this)),this.registerFeature(new Cd.ColorProviderFeature(this)),this.registerFeature(new Td.WorkspaceFoldersFeature(this)),this.registerFeature(new Ed.FoldingRangeFeature(this)),this.registerFeature(new Pd.DeclarationFeature(this)),this.registerFeature(new Sd.SelectionRangeFeature(this)),this.registerFeature(new Dd.ProgressFeature(this))}_mainGetRootPath(){let e=_t.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{yd.lstat(r,(o,a)=>{n(!o&&a.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}};Je.LanguageClient=ta;var ra=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return _t.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new _t.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,o=n?_t.workspace.getConfiguration(r).get(n,!1):_t.workspace.getConfiguration(r);o&&this._client.needsStart()?this._client.start():!o&&this._client.needsStop()&&this._client.stop()}};Je.SettingMonitor=ra;var na;(function(t){function e(r){return[new bd.CallHierarchyFeature(r),new Od.SemanticTokensFeature(r)]}t.createAll=e})(na=Je.ProposedFeatures||(Je.ProposedFeatures={}))});var Nd={};ha(Nd,{activate:()=>kd,deactivate:()=>xd});var oa=pa(ia()),sa="blade",Jt;function kd(t){return Xn(this,null,function*(){let e=t.asAbsolutePath("laravel-dev-generators");Jt=Id(e),Jt.start()})}function xd(){if(!!Jt)return Jt.stop()}function Id(t){let e={command:t,args:["lsp"]},r={documentSelector:[{language:sa,scheme:"file"},{language:sa,scheme:"untitled"}],initializationOptions:{}};return Jt=new oa.LanguageClient("bladeLsp","Laravel blade lsp",e,r),Jt}module.exports=ga(Nd);0&&(module.exports={activate,deactivate});
